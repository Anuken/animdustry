/* Generated by Nim Compiler v1.6.4 */
#define NIM_INTBITS 64
#define NIM_EmulateOverflowChecks

#include "nimbase.h"
#include <string.h>
#include <math.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ;
typedef struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A;
typedef struct tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ;
typedef struct tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw;
typedef struct tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ;
typedef struct tySequence__0kQCkoEfCPQLMKSKR1VczA tySequence__0kQCkoEfCPQLMKSKR1VczA;
typedef struct tySequence__0kQCkoEfCPQLMKSKR1VczA_Content tySequence__0kQCkoEfCPQLMKSKR1VczA_Content;
typedef struct tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ;
typedef struct tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ_Content tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ_Content;
typedef struct tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw;
typedef struct tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ;
typedef struct tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw;
typedef struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA;
typedef struct Exception Exception;
typedef struct RootObj RootObj;
typedef struct TNimTypeV2 TNimTypeV2;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA tySequence__uB9b75OUPRENsBAu4AnoePA;
typedef struct tySequence__uB9b75OUPRENsBAu4AnoePA_Content tySequence__uB9b75OUPRENsBAu4AnoePA_Content;
typedef struct tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g;
typedef struct tySequence__SAu3TlCYLYik19b9aAxDCNzA tySequence__SAu3TlCYLYik19b9aAxDCNzA;
typedef struct tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content;
typedef struct tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw;
typedef struct tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g;
typedef struct tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg;
typedef struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA;
struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A {
NI rc;
};
typedef NU8 tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw;
typedef NU8 tyEnum_BlendMode__5LYzfbrLeWt4hzSNsGzCUQ;
struct tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ {
NF32 r;
NF32 g;
NF32 b;
NF32 a;
};
typedef NF32 tyArray__mEOj6RCJtUq5VS5mI7S2ew[9];
struct tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ {
tyArray__mEOj6RCJtUq5VS5mI7S2ew arr;
};
struct tySequence__0kQCkoEfCPQLMKSKR1VczA {
  NI len; tySequence__0kQCkoEfCPQLMKSKR1VczA_Content* p;
};
struct tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ {
  NI len; tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ_Content* p;
};
struct tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ {
tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw kind;
tyEnum_BlendMode__5LYzfbrLeWt4hzSNsGzCUQ blendMode;
NF32 opacity;
tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ color;
tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image;
tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ imageMat;
tySequence__0kQCkoEfCPQLMKSKR1VczA gradientHandlePositions;
tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ gradientStops;
};
struct tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw {
tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ color;
NF32 position;
};
struct TNimTypeV2 {
void* destructor;
NI size;
NI align;
NCSTRING name;
void* traceImpl;
void* typeInfoV1;
NI flags;
};
struct RootObj {
TNimTypeV2* m_type;
};
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
struct tySequence__uB9b75OUPRENsBAu4AnoePA {
  NI len; tySequence__uB9b75OUPRENsBAu4AnoePA_Content* p;
};
struct Exception {
  RootObj Sup;
Exception* parent;
NCSTRING name;
NimStringV2 message;
tySequence__uB9b75OUPRENsBAu4AnoePA trace;
Exception* up;
};
struct tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA {
  Exception Sup;
};
struct tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw {
  tyObject_CatchableError__qrLSDoe2oBoAqNtJ9badtnA Sup;
};
struct tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ {
  tyObject_ValueError__yoNlBGx0D2tRizIdhQuENw Sup;
};
typedef NF32 tyArray__4YxcnnI8do9a6vmNKtzdSKw[2];
struct tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g {
tyArray__4YxcnnI8do9a6vmNKtzdSKw arr;
};
struct tySequence__SAu3TlCYLYik19b9aAxDCNzA {
  NI len; tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content* p;
};
struct tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw {
NI width;
NI height;
tySequence__SAu3TlCYLYik19b9aAxDCNzA data;
};
struct tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw {
NU8 r;
NU8 g;
NU8 b;
NU8 a;
};
struct tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g {
NU8 r;
NU8 g;
NU8 b;
NU8 a;
};
struct tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg {
tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image;
};


#ifndef tySequence__0kQCkoEfCPQLMKSKR1VczA_Content_PP
#define tySequence__0kQCkoEfCPQLMKSKR1VczA_Content_PP
struct tySequence__0kQCkoEfCPQLMKSKR1VczA_Content { NI cap; tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ_Content_PP
#define tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ_Content_PP
struct tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ_Content { NI cap; tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__0kQCkoEfCPQLMKSKR1VczA_Content_PP
#define tySequence__0kQCkoEfCPQLMKSKR1VczA_Content_PP
struct tySequence__0kQCkoEfCPQLMKSKR1VczA_Content { NI cap; tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g data[SEQ_DECL_SIZE];};
#endif

      struct tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA {
NCSTRING procname;
NI line;
NCSTRING filename;
};


#ifndef tySequence__uB9b75OUPRENsBAu4AnoePA_Content_PP
#define tySequence__uB9b75OUPRENsBAu4AnoePA_Content_PP
struct tySequence__uB9b75OUPRENsBAu4AnoePA_Content { NI cap; tyObject_StackTraceEntry__oLyohQ7O2XOvGnflOss8EA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content_PP
#define tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content_PP
struct tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content { NI cap; tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw data[SEQ_DECL_SIZE];};
#endif

      static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p);
static N_INLINE(NI, minuspercent___system_716)(NI x, NI y);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_125)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* dest);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p, NI alignment);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_308)(tySequence__0kQCkoEfCPQLMKSKR1VczA* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_51)(tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ* dest);
N_LIB_PRIVATE N_NIMCALL(void, alignedDealloc)(void* p, NI align);
static N_INLINE(void, nimIncRef)(void* p);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_41)(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* dest);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size, NI alignment);
static N_INLINE(void, mat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2898)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result);
static N_INLINE(void, gmat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2807)(NF32 m00, NF32 m01, NF32 m02, NF32 m10, NF32 m11, NF32 m12, NF32 m20, NF32 m21, NF32 m22, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, fillGradientLinear__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_226)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint);
N_LIB_PRIVATE N_NIMCALL(void, raiseExceptionEx)(Exception* e, NCSTRING ename, NCSTRING procname, NCSTRING filename, NI line);
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979)(NF32 xX60gensym72_, NF32 yX60gensym72_);
static N_INLINE(NF32, toLineSpace__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_240)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g at, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g to, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g point);
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, minus___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_441)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g aX60gensym153_, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g bX60gensym153_);
N_LIB_PRIVATE N_NIMCALL(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, gradientColor__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_180)(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint, NF32 t);
N_LIB_PRIVATE N_NIMCALL(tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ, mix__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53Zchroma_844)(tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ a, tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ b, NF32 v);
static N_INLINE(void, stareq___OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZdistance_29)(NF32* x, NF32 y);
static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_260)(tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ c);
static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_7)(tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g c);
static N_INLINE(tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g, rgba__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_16)(tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ c);
static N_INLINE(NI, dataIndex__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_171)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, NI x, NI y);
N_LIB_PRIVATE N_NIMCALL(void, fillGradientRadial__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_318)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint);
static N_INLINE(NF32, dist__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_424)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g at, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g to);
static N_INLINE(NF32, length__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_455)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g a);
static N_INLINE(NF32, fixAngle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_382)(NF32 angle);
static N_INLINE(void, minuseq___OOZfauZsrcZfauZfmath_111)(NF32* x, NF32 y);
static N_INLINE(void, pluseq___OOZfauZsrcZfauZfmath_107)(NF32* x, NF32 y);
static N_INLINE(NF32, angle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_376)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g a);
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, normalize__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1592)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g a);
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, slash___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1608)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g aX60gensym155_, NF32 bX60gensym155_);
static N_INLINE(void, inverse__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_844)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result);
static N_INLINE(NF32, determinant__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_850)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a);
static N_INLINE(void, star___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_3967)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ b, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result);
static N_INLINE(void, translate__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_4161)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g v, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result);
static N_INLINE(void, rotate__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_400)(NF32 angle, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result);
static N_INLINE(void, scale__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_3934)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g v, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result);
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, star___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_214)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g b);
N_LIB_PRIVATE N_NIMCALL(void, fillGradientAngular__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_506)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint);
extern TNimTypeV2 NTIv2__iGcRqvltYLQCoM1tI9cqukQ_;
static const struct {
  NI cap; NIM_CHAR data[34+1];
} TM__Fzim5ZkfCOtV9auTP9aiMPew_2 = { 34 | NIM_STRLIT_FLAG, "Linear gradient requires 2 handles" };
static const NimStringV2 TM__Fzim5ZkfCOtV9auTP9aiMPew_3 = {34, (NimStrPayload*)&TM__Fzim5ZkfCOtV9auTP9aiMPew_2};
static const struct {
  NI cap; NIM_CHAR data[40+1];
} TM__Fzim5ZkfCOtV9auTP9aiMPew_4 = { 40 | NIM_STRLIT_FLAG, "Gradient must have at least 1 color stop" };
static const NimStringV2 TM__Fzim5ZkfCOtV9auTP9aiMPew_5 = {40, (NimStrPayload*)&TM__Fzim5ZkfCOtV9auTP9aiMPew_4};
static const struct {
  NI cap; NIM_CHAR data[34+1];
} TM__Fzim5ZkfCOtV9auTP9aiMPew_6 = { 34 | NIM_STRLIT_FLAG, "Radial gradient requires 3 handles" };
static const NimStringV2 TM__Fzim5ZkfCOtV9auTP9aiMPew_7 = {34, (NimStrPayload*)&TM__Fzim5ZkfCOtV9auTP9aiMPew_6};
static const NimStringV2 TM__Fzim5ZkfCOtV9auTP9aiMPew_8 = {40, (NimStrPayload*)&TM__Fzim5ZkfCOtV9auTP9aiMPew_4};
static const struct {
  NI cap; NIM_CHAR data[35+1];
} TM__Fzim5ZkfCOtV9auTP9aiMPew_9 = { 35 | NIM_STRLIT_FLAG, "Angular gradient requires 2 handles" };
static const NimStringV2 TM__Fzim5ZkfCOtV9auTP9aiMPew_10 = {35, (NimStrPayload*)&TM__Fzim5ZkfCOtV9auTP9aiMPew_9};
static const NimStringV2 TM__Fzim5ZkfCOtV9auTP9aiMPew_11 = {40, (NimStrPayload*)&TM__Fzim5ZkfCOtV9auTP9aiMPew_4};
static const struct {
  NI cap; NIM_CHAR data[24+1];
} TM__Fzim5ZkfCOtV9auTP9aiMPew_12 = { 24 | NIM_STRLIT_FLAG, "Paint must be a gradient" };
static const NimStringV2 TM__Fzim5ZkfCOtV9auTP9aiMPew_13 = {24, (NimStrPayload*)&TM__Fzim5ZkfCOtV9auTP9aiMPew_12};
extern NIM_BOOL nimInErrorMode__system_3443;
static N_INLINE(NI, minuspercent___system_716)(NI x, NI y) {
	NI result;
	result = (NI)0;
	result = ((NI) ((NU)((NU64)(((NU) (x))) - (NU64)(((NU) (y))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	{
		tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A* cell;
		NI T5_;
		if (!!((p == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___system_716(((NI) (ptrdiff_t) (p)), ((NI) 8));
		cell = ((tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A*) (T5_));
		{
			if (!((NI)((*cell).rc & ((NI) -8)) == ((NI) 0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
		LA8_: ;
		{
			(*cell).rc -= ((NI) 8);
		}
		LA6_: ;
	}
	LA3_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_51)(tySequence__EQQ9b9bgp9bw3mmU00m7ecEjQ* dest) {
	if ((*dest).p && !((*dest).p->cap & NIM_STRLIT_FLAG)) {
 alignedDealloc((*dest).p, NIM_ALIGNOF(tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw));
}
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_41)(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).image);
		if (!T3_) goto LA4_;
		eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_125((*dest).image);
		nimRawDispose((*dest).image, ((NI) 8));
	}
	LA4_: ;
	eqdestroy___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_308((&(*dest).gradientHandlePositions));
	eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_51((&(*dest).gradientStops));
}
static N_INLINE(void, nimIncRef)(void* p) {
	NI T1_;
	T1_ = (NI)0;
	T1_ = minuspercent___system_716(((NI) (ptrdiff_t) (p)), ((NI) 8));
	(*((tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A*) (T1_))).rc += ((NI) 8);
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_142)(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ** dest, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* src) {
	{
		if (!src) goto LA3_;
		nimIncRef(src);
	}
	LA3_: ;
	{
		NIM_BOOL T7_;
		T7_ = (NIM_BOOL)0;
		T7_ = nimDecRefIsLast((*dest));
		if (!T7_) goto LA8_;
		eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_41((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA8_: ;
	(*dest) = src;
}
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_3443);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_7(p, ((int) 0), size);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, gmat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2807)(NF32 m00, NF32 m01, NF32 m02, NF32 m10, NF32 m11, NF32 m12, NF32 m20, NF32 m21, NF32 m22, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result) {
	NF32 colontmpD_;
	NF32 colontmpD__2;
	NF32 colontmpD__3;
	NF32 colontmpD__4;
	NF32 colontmpD__5;
	NF32 colontmpD__6;
	NF32 colontmpD__7;
	NF32 colontmpD__8;
	NF32 colontmpD__9;
	colontmpD_ = (NF32)0;
	colontmpD__2 = (NF32)0;
	colontmpD__3 = (NF32)0;
	colontmpD__4 = (NF32)0;
	colontmpD__5 = (NF32)0;
	colontmpD__6 = (NF32)0;
	colontmpD__7 = (NF32)0;
	colontmpD__8 = (NF32)0;
	colontmpD__9 = (NF32)0;
	nimZeroMem((void*)Result, sizeof(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ));
	colontmpD_ = m00;
	(*Result).arr[0] = colontmpD_;
	colontmpD__2 = m01;
	(*Result).arr[1] = colontmpD__2;
	colontmpD__3 = m02;
	(*Result).arr[2] = colontmpD__3;
	colontmpD__4 = m10;
	(*Result).arr[3] = colontmpD__4;
	colontmpD__5 = m11;
	(*Result).arr[4] = colontmpD__5;
	colontmpD__6 = m12;
	(*Result).arr[5] = colontmpD__6;
	colontmpD__7 = m20;
	(*Result).arr[6] = colontmpD__7;
	colontmpD__8 = m21;
	(*Result).arr[7] = colontmpD__8;
	colontmpD__9 = m22;
	(*Result).arr[8] = colontmpD__9;
}
static N_INLINE(void, mat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2898)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	gmat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2807(1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 1.0f, Result);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ*, newPaint__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_29)(tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw kind) {
	tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* result;
	tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw colontmpD_;
	tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	colontmpD_ = (tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw)0;
	T1_ = NIM_NIL;
	T1_ = (tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ*) nimNewObj(sizeof(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ), NIM_ALIGNOF(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ));
	colontmpD_ = kind;
	(*T1_).kind = colontmpD_;
	(*T1_).opacity = 1.0f;
	mat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2898((&(*T1_).imageMat));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = T1_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_139)(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ** dest) {
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_41((*dest));
		nimRawDispose((*dest), ((NI) 8));
	}
	LA4_: ;
}
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979)(NF32 xX60gensym72_, NF32 yX60gensym72_) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g result;
	NF32 colontmpD_;
	NF32 colontmpD__2;
	colontmpD_ = (NF32)0;
	colontmpD__2 = (NF32)0;
	nimZeroMem((void*)(&result), sizeof(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g));
	colontmpD_ = xX60gensym72_;
	result.arr[0] = colontmpD_;
	colontmpD__2 = yX60gensym72_;
	result.arr[1] = colontmpD__2;
	return result;
}
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, minus___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_441)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g aX60gensym153_, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g bX60gensym153_) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g result;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T1_;
	nimZeroMem((void*)(&T1_), sizeof(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g));
	T1_.arr[0] = ((NF32)(aX60gensym153_.arr[(((NI) 0))- 0]) - (NF32)(bX60gensym153_.arr[(((NI) 0))- 0]));
	T1_.arr[1] = ((NF32)(aX60gensym153_.arr[(((NI) 1))- 0]) - (NF32)(bX60gensym153_.arr[(((NI) 1))- 0]));
	result = T1_;
	return result;
}
static N_INLINE(NF32, toLineSpace__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_240)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g at, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g to, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g point) {
	NF32 result;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g d;
	NF32 det;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = (NF32)0;
	d = minus___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_441(to, at);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	det = ((NF32)(((NF32)(d.arr[(((NI) 0))- 0]) * (NF32)(d.arr[(((NI) 0))- 0]))) + (NF32)(((NF32)(d.arr[(((NI) 1))- 0]) * (NF32)(d.arr[(((NI) 1))- 0]))));
	result = ((NF32)(((NF32)(((NF32)(d.arr[(((NI) 1))- 0]) * (NF32)(((NF32)(point.arr[(((NI) 1))- 0]) - (NF32)(at.arr[(((NI) 1))- 0]))))) + (NF32)(((NF32)(d.arr[(((NI) 0))- 0]) * (NF32)(((NF32)(point.arr[(((NI) 0))- 0]) - (NF32)(at.arr[(((NI) 0))- 0]))))))) / (NF32)(det));
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, stareq___OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZdistance_29)(NF32* x, NF32 y) {
	(*x) = ((NF32)((*x)) * (NF32)(y));
}
static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_7)(tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g c) {
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw result;
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	result.r = ((NU8) ((NU32)((NU32)((NU32)((NU32)(((NU32) (c.r))) * (NU32)(((NU32) (c.a))))) / (NU32)(((NU32) 255)))));
	result.g = ((NU8) ((NU32)((NU32)((NU32)((NU32)(((NU32) (c.g))) * (NU32)(((NU32) (c.a))))) / (NU32)(((NU32) 255)))));
	result.b = ((NU8) ((NU32)((NU32)((NU32)((NU32)(((NU32) (c.b))) * (NU32)(((NU32) (c.a))))) / (NU32)(((NU32) 255)))));
	result.a = c.a;
	return result;
}
static N_INLINE(tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g, rgba__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_16)(tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ c) {
	tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g result;
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g));
	result.r = ((NU8) (((NF32)(c.r) * (NF32)(255.0f))));
	result.g = ((NU8) (((NF32)(c.g) * (NF32)(255.0f))));
	result.b = ((NU8) (((NF32)(c.b) * (NF32)(255.0f))));
	result.a = ((NU8) (((NF32)(c.a) * (NF32)(255.0f))));
	return result;
}
static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_260)(tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ c) {
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw result;
	tyObject_ColorRGBA__rA9bnJsuh1dIgzE1rI2je7g T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	T1_ = rgba__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_16(c);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_7(T1_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, gradientColor__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_180)(tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint, NF32 t) {
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw result;
	NI index;
	tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ color;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	index = ((NI) -1);
	{
		NI i;
		tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw stop;
		NI i_2;
		NI L;
		NI T2_;
		i = (NI)0;
		nimZeroMem((void*)(&stop), sizeof(tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw));
		i_2 = ((NI) 0);
		T2_ = (*paint).gradientStops.len;
		L = T2_;
		{
			while (1) {
				if (!(i_2 < L)) goto LA4;
				i = i_2;
				stop = (*paint).gradientStops.p->data[i_2];
				{
					if (!(stop.position < t)) goto LA7_;
					index = i;
				}
				LA7_: ;
				{
					if (!(t < stop.position)) goto LA11_;
					goto LA1;
				}
				LA11_: ;
				i_2 += ((NI) 1);
			} LA4: ;
		}
	} LA1: ;
	nimZeroMem((void*)(&color), sizeof(tyObject_Color__9au4GkmJGMtYC7TjyEwPQlQ));
	{
		if (!(index == ((NI) -1))) goto LA15_;
		color = (*paint).gradientStops.p->data[((NI) 0)].color;
	}
	goto LA13_;
	LA15_: ;
	{
		NI T18_;
		T18_ = (*paint).gradientStops.len;
		if (!(T18_ <= (NI)(index + ((NI) 1)))) goto LA19_;
		color = (*paint).gradientStops.p->data[index].color;
	}
	goto LA13_;
	LA19_: ;
	{
		tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw gs1;
		tyObject_ColorStop__DhoJbHfvvZkBGJ021J3K9bw gs2;
		gs1 = (*paint).gradientStops.p->data[index];
		gs2 = (*paint).gradientStops.p->data[(NI)(index + ((NI) 1))];
		color = mix__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53Zchroma_844(gs1.color, gs2.color, ((NF32)(((NF32)(t) - (NF32)(gs1.position))) / (NF32)(((NF32)(gs2.position) - (NF32)(gs1.position)))));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA13_: ;
	stareq___OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZdistance_29((&color.a), (*paint).opacity);
	result = rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZtransformations_260(color);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NI, dataIndex__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_171)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, NI x, NI y) {
	NI result;
	result = (NI)0;
	result = (NI)((NI)((*image).width * y) + x);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, fillGradientLinear__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_226)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g at;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g to;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T3_;
		tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ* T6_;
		T3_ = (*paint).gradientHandlePositions.len;
		if (!!((T3_ == ((NI) 2)))) goto LA4_;
		T6_ = NIM_NIL;
		T6_ = (tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ*) nimNewObj(sizeof(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ), NIM_ALIGNOF(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ));
		(*T6_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__iGcRqvltYLQCoM1tI9cqukQ_);
		(*T6_).Sup.Sup.Sup.name = "PixieError";
		(*T6_).Sup.Sup.Sup.message = TM__Fzim5ZkfCOtV9auTP9aiMPew_3;
		(*T6_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T6_, "PixieError", "fillGradientLinear", "paints.nim", 102);
		goto BeforeRet_;
	}
	LA4_: ;
	{
		NI T9_;
		tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ* T12_;
		T9_ = (*paint).gradientStops.len;
		if (!(T9_ == ((NI) 0))) goto LA10_;
		T12_ = NIM_NIL;
		T12_ = (tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ*) nimNewObj(sizeof(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ), NIM_ALIGNOF(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ));
		(*T12_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__iGcRqvltYLQCoM1tI9cqukQ_);
		(*T12_).Sup.Sup.Sup.name = "PixieError";
		(*T12_).Sup.Sup.Sup.message = TM__Fzim5ZkfCOtV9auTP9aiMPew_5;
		(*T12_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T12_, "PixieError", "fillGradientLinear", "paints.nim", 105);
		goto BeforeRet_;
	}
	LA10_: ;
	{
		if (!((*paint).opacity == 0.0f)) goto LA15_;
		goto BeforeRet_;
	}
	LA15_: ;
	at = (*paint).gradientHandlePositions.p->data[((NI) 0)];
	to = (*paint).gradientHandlePositions.p->data[((NI) 1)];
	{
		NI x;
		if (!(at.arr[(((NI) 1))- 0] == to.arr[(((NI) 1))- 0])) goto LA19_;
		x = (NI)0;
		{
			while (1) {
				tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g xy;
				NF32 t;
				tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw rgbx;
				if (!(x < (*image).width)) goto LA22;
				xy = vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979(((NF32) (x)), 0.0f);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				t = toLineSpace__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_240(at, to, xy);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				rgbx = gradientColor__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_180(paint, t);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				{
					NI y;
					NI i;
					y = (NI)0;
					i = ((NI) 0);
					{
						while (1) {
							tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T26_;
							tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T27_;
							NI T28_;
							if (!(i < (*image).height)) goto LA25;
							y = i;
							nimZeroMem((void*)(&T26_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							nimZeroMem((void*)(&T26_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							T26_.image = image;
							nimZeroMem((void*)(&T27_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							nimZeroMem((void*)(&T27_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							T27_.image = image;
							T28_ = (NI)0;
							T28_ = dataIndex__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_171(T27_.image, x, y);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							(*T26_.image).data.p->data[T28_] = rgbx;
							i += ((NI) 1);
						} LA25: ;
					}
				}
				x += ((NI) 1);
			} LA22: ;
		}
	}
	goto LA17_;
	LA19_: ;
	{
		if (!(at.arr[(((NI) 0))- 0] == to.arr[(((NI) 0))- 0])) goto LA30_;
		{
			NI y_2;
			NI i_2;
			y_2 = (NI)0;
			i_2 = ((NI) 0);
			{
				while (1) {
					tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g xy_2;
					NF32 t_2;
					tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw rgbx_2;
					NI x_2;
					if (!(i_2 < (*image).height)) goto LA34;
					y_2 = i_2;
					xy_2 = vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979(0.0f, ((NF32) (y_2)));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					t_2 = toLineSpace__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_240(at, to, xy_2);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					rgbx_2 = gradientColor__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_180(paint, t_2);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					x_2 = (NI)0;
					{
						NI x_3;
						NI i_3;
						x_3 = (NI)0;
						i_3 = x_2;
						{
							while (1) {
								tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T38_;
								tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T39_;
								NI T40_;
								if (!(i_3 < (*image).width)) goto LA37;
								x_3 = i_3;
								nimZeroMem((void*)(&T38_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								nimZeroMem((void*)(&T38_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								T38_.image = image;
								nimZeroMem((void*)(&T39_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								nimZeroMem((void*)(&T39_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								T39_.image = image;
								T40_ = (NI)0;
								T40_ = dataIndex__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_171(T39_.image, x_3, y_2);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								(*T38_.image).data.p->data[T40_] = rgbx_2;
								i_3 += ((NI) 1);
							} LA37: ;
						}
					}
					i_2 += ((NI) 1);
				} LA34: ;
			}
		}
	}
	goto LA17_;
	LA30_: ;
	{
		{
			NI y_3;
			NI i_4;
			y_3 = (NI)0;
			i_4 = ((NI) 0);
			{
				while (1) {
					if (!(i_4 < (*image).height)) goto LA44;
					y_3 = i_4;
					{
						NI x_4;
						NI i_5;
						x_4 = (NI)0;
						i_5 = ((NI) 0);
						{
							while (1) {
								tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g xy_3;
								NF32 t_3;
								tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T48_;
								tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T49_;
								NI T50_;
								tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw T51_;
								if (!(i_5 < (*image).width)) goto LA47;
								x_4 = i_5;
								xy_3 = vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979(((NF32) (x_4)), ((NF32) (y_3)));
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								t_3 = toLineSpace__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_240(at, to, xy_3);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								nimZeroMem((void*)(&T48_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								nimZeroMem((void*)(&T48_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								T48_.image = image;
								nimZeroMem((void*)(&T49_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								nimZeroMem((void*)(&T49_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
								T49_.image = image;
								T50_ = (NI)0;
								T50_ = dataIndex__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_171(T49_.image, x_4, y_3);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								nimZeroMem((void*)(&T51_), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
								T51_ = gradientColor__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_180(paint, t_3);
								if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
								(*T48_.image).data.p->data[T50_] = T51_;
								i_5 += ((NI) 1);
							} LA47: ;
						}
					}
					i_4 += ((NI) 1);
				} LA44: ;
			}
		}
	}
	LA17_: ;
	}BeforeRet_: ;
}
static N_INLINE(NF32, length__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_455)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g a) {
	NF32 result;
	result = sqrtf(((NF32)(((NF32)(a.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 0))- 0]))) + (NF32)(((NF32)(a.arr[(((NI) 1))- 0]) * (NF32)(a.arr[(((NI) 1))- 0])))));
	return result;
}
static N_INLINE(NF32, dist__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_424)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g at, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g to) {
	NF32 result;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T1_ = minus___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_441(at, to);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = length__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_455(T1_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(void, minuseq___OOZfauZsrcZfauZfmath_111)(NF32* x, NF32 y) {
	(*x) = ((NF32)((*x)) - (NF32)(y));
}
static N_INLINE(void, pluseq___OOZfauZsrcZfauZfmath_107)(NF32* x, NF32 y) {
	(*x) = ((NF32)((*x)) + (NF32)(y));
}
static N_INLINE(NF32, fixAngle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_382)(NF32 angle) {
	NF32 result;
	result = angle;
	{
		while (1) {
			if (!(3.141592653589793 < ((NF) (result)))) goto LA2;
			minuseq___OOZfauZsrcZfauZfmath_111((&result), 6.2831855f);
		} LA2: ;
	}
	{
		while (1) {
			if (!(((NF) (result)) < -3.141592653589793)) goto LA4;
			pluseq___OOZfauZsrcZfauZfmath_107((&result), 6.2831855f);
		} LA4: ;
	}
	return result;
}
static N_INLINE(NF32, angle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_376)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g a) {
	NF32 result;
	result = atan2f(a.arr[(((NI) 1))- 0], a.arr[(((NI) 0))- 0]);
	return result;
}
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, slash___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1608)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g aX60gensym155_, NF32 bX60gensym155_) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g result;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T1_;
	nimZeroMem((void*)(&T1_), sizeof(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g));
	T1_.arr[0] = ((NF32)(aX60gensym155_.arr[(((NI) 0))- 0]) / (NF32)(bX60gensym155_));
	T1_.arr[1] = ((NF32)(aX60gensym155_.arr[(((NI) 1))- 0]) / (NF32)(bX60gensym155_));
	result = T1_;
	return result;
}
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, normalize__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1592)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g a) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g result;
	NF32 T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T1_ = (NF32)0;
	T1_ = length__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_455(a);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	result = slash___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1608(a, T1_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
static N_INLINE(NF32, determinant__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_850)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a) {
	NF32 result;
	result = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 0))- 0]) * (NF32)(((NF32)(((NF32)(a.arr[(((NI) 4))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 7))- 0]) * (NF32)(a.arr[(((NI) 5))- 0]))))))) - (NF32)(((NF32)(a.arr[(((NI) 1))- 0]) * (NF32)(((NF32)(((NF32)(a.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 5))- 0]) * (NF32)(a.arr[(((NI) 6))- 0]))))))))) + (NF32)(((NF32)(a.arr[(((NI) 2))- 0]) * (NF32)(((NF32)(((NF32)(a.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 7))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 4))- 0]) * (NF32)(a.arr[(((NI) 6))- 0]))))))));
	return result;
}
static N_INLINE(void, inverse__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_844)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result) {
	NF32 invDet;
	NF32 T1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	T1_ = (NF32)0;
	T1_ = determinant__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_850(a);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	invDet = ((NF32)(1.0f) / (NF32)(T1_));
	(*Result).arr[(((NI) 0))- 0] = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 4))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 7))- 0]) * (NF32)(a.arr[(((NI) 5))- 0]))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 1))- 0] = ((NF32)(-(((NF32)(((NF32)(a.arr[(((NI) 1))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 2))- 0]) * (NF32)(a.arr[(((NI) 7))- 0])))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 2))- 0] = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 1))- 0]) * (NF32)(a.arr[(((NI) 5))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 2))- 0]) * (NF32)(a.arr[(((NI) 4))- 0]))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 3))- 0] = ((NF32)(-(((NF32)(((NF32)(a.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 5))- 0]) * (NF32)(a.arr[(((NI) 6))- 0])))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 4))- 0] = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 2))- 0]) * (NF32)(a.arr[(((NI) 6))- 0]))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 5))- 0] = ((NF32)(-(((NF32)(((NF32)(a.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 5))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 2))- 0])))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 6))- 0] = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 7))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 6))- 0]) * (NF32)(a.arr[(((NI) 4))- 0]))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 7))- 0] = ((NF32)(-(((NF32)(((NF32)(a.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 7))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 6))- 0]) * (NF32)(a.arr[(((NI) 1))- 0])))))) * (NF32)(invDet));
	(*Result).arr[(((NI) 8))- 0] = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 4))- 0]))) - (NF32)(((NF32)(a.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 1))- 0]))))) * (NF32)(invDet));
	}BeforeRet_: ;
}
static N_INLINE(void, star___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_3967)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ b, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result) {
	(*Result).arr[(((NI) 0))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 0))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 1))- 0]) * (NF32)(a.arr[(((NI) 3))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 2))- 0]) * (NF32)(a.arr[(((NI) 6))- 0]))));
	(*Result).arr[(((NI) 1))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 1))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 1))- 0]) * (NF32)(a.arr[(((NI) 4))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 2))- 0]) * (NF32)(a.arr[(((NI) 7))- 0]))));
	(*Result).arr[(((NI) 2))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 0))- 0]) * (NF32)(a.arr[(((NI) 2))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 1))- 0]) * (NF32)(a.arr[(((NI) 5))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 2))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))));
	(*Result).arr[(((NI) 3))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 0))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 4))- 0]) * (NF32)(a.arr[(((NI) 3))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 5))- 0]) * (NF32)(a.arr[(((NI) 6))- 0]))));
	(*Result).arr[(((NI) 4))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 1))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 4))- 0]) * (NF32)(a.arr[(((NI) 4))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 5))- 0]) * (NF32)(a.arr[(((NI) 7))- 0]))));
	(*Result).arr[(((NI) 5))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 3))- 0]) * (NF32)(a.arr[(((NI) 2))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 4))- 0]) * (NF32)(a.arr[(((NI) 5))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 5))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))));
	(*Result).arr[(((NI) 6))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 6))- 0]) * (NF32)(a.arr[(((NI) 0))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 7))- 0]) * (NF32)(a.arr[(((NI) 3))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 8))- 0]) * (NF32)(a.arr[(((NI) 6))- 0]))));
	(*Result).arr[(((NI) 7))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 6))- 0]) * (NF32)(a.arr[(((NI) 1))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 7))- 0]) * (NF32)(a.arr[(((NI) 4))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 8))- 0]) * (NF32)(a.arr[(((NI) 7))- 0]))));
	(*Result).arr[(((NI) 8))- 0] = ((NF32)(((NF32)(((NF32)(b.arr[(((NI) 6))- 0]) * (NF32)(a.arr[(((NI) 2))- 0]))) + (NF32)(((NF32)(b.arr[(((NI) 7))- 0]) * (NF32)(a.arr[(((NI) 5))- 0]))))) + (NF32)(((NF32)(b.arr[(((NI) 8))- 0]) * (NF32)(a.arr[(((NI) 8))- 0]))));
}
static N_INLINE(void, translate__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_4161)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g v, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	gmat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2807(1.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, v.arr[(((NI) 0))- 0], v.arr[(((NI) 1))- 0], 1.0f, Result);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, rotate__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_400)(NF32 angle, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result) {
	NF32 sin_1;
	NF32 cos_1;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	sin_1 = sinf(angle);
	cos_1 = cosf(angle);
	gmat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2807(cos_1, -(sin_1), 0.0f, sin_1, cos_1, 0.0f, 0.0f, 0.0f, 1.0f, Result);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, scale__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_3934)(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g v, tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ* Result) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	gmat3__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_2807(v.arr[(((NI) 0))- 0], 0.0f, 0.0f, 0.0f, v.arr[(((NI) 1))- 0], 0.0f, 0.0f, 0.0f, 1.0f, Result);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g, star___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_214)(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ a, tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g b) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g result;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T1_;
	nimZeroMem((void*)(&T1_), sizeof(tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g));
	T1_.arr[0] = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 0))- 0]) * (NF32)(b.arr[(((NI) 0))- 0]))) + (NF32)(((NF32)(a.arr[(((NI) 3))- 0]) * (NF32)(b.arr[(((NI) 1))- 0]))))) + (NF32)(a.arr[(((NI) 6))- 0]));
	T1_.arr[1] = ((NF32)(((NF32)(((NF32)(a.arr[(((NI) 1))- 0]) * (NF32)(b.arr[(((NI) 0))- 0]))) + (NF32)(((NF32)(a.arr[(((NI) 4))- 0]) * (NF32)(b.arr[(((NI) 1))- 0]))))) + (NF32)(a.arr[(((NI) 7))- 0]));
	result = T1_;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, fillGradientRadial__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_318)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g center;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g edge;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g skew;
	NF32 distanceX;
	NF32 distanceY;
	NF32 gradientAngle;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T17_;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T18_;
	NF32 T19_;
	tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ mat;
	tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ T20_;
	tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ T21_;
	tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ T22_;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T23_;
	tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ T24_;
	tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ T25_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T3_;
		tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ* T6_;
		T3_ = (*paint).gradientHandlePositions.len;
		if (!!((T3_ == ((NI) 3)))) goto LA4_;
		T6_ = NIM_NIL;
		T6_ = (tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ*) nimNewObj(sizeof(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ), NIM_ALIGNOF(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ));
		(*T6_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__iGcRqvltYLQCoM1tI9cqukQ_);
		(*T6_).Sup.Sup.Sup.name = "PixieError";
		(*T6_).Sup.Sup.Sup.message = TM__Fzim5ZkfCOtV9auTP9aiMPew_7;
		(*T6_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T6_, "PixieError", "fillGradientRadial", "paints.nim", 175);
		goto BeforeRet_;
	}
	LA4_: ;
	{
		NI T9_;
		tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ* T12_;
		T9_ = (*paint).gradientStops.len;
		if (!(T9_ == ((NI) 0))) goto LA10_;
		T12_ = NIM_NIL;
		T12_ = (tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ*) nimNewObj(sizeof(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ), NIM_ALIGNOF(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ));
		(*T12_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__iGcRqvltYLQCoM1tI9cqukQ_);
		(*T12_).Sup.Sup.Sup.name = "PixieError";
		(*T12_).Sup.Sup.Sup.message = TM__Fzim5ZkfCOtV9auTP9aiMPew_8;
		(*T12_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T12_, "PixieError", "fillGradientRadial", "paints.nim", 178);
		goto BeforeRet_;
	}
	LA10_: ;
	{
		if (!((*paint).opacity == 0.0f)) goto LA15_;
		goto BeforeRet_;
	}
	LA15_: ;
	center = (*paint).gradientHandlePositions.p->data[((NI) 0)];
	edge = (*paint).gradientHandlePositions.p->data[((NI) 1)];
	skew = (*paint).gradientHandlePositions.p->data[((NI) 2)];
	distanceX = dist__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_424(center, edge);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	distanceY = dist__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_424(center, skew);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T17_ = minus___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_441(center, edge);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T18_ = normalize__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1592(T17_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T19_ = (NF32)0;
	T19_ = angle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_376(T18_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	gradientAngle = fixAngle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_382(T19_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&mat), sizeof(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ));
	nimZeroMem((void*)(&T20_), sizeof(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ));
	translate__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_4161(center, (&T20_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T21_), sizeof(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ));
	rotate__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_400(-(gradientAngle), (&T21_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T22_), sizeof(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ));
	star___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_3967(T20_, T21_, (&T22_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T23_ = vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979(distanceX, distanceY);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T24_), sizeof(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ));
	scale__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_3934(T23_, (&T24_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimZeroMem((void*)(&T25_), sizeof(tyObject_GMat3__aq9cWE9bYTeRa9cNA7MRTKvcQ));
	star___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_3967(T22_, T24_, (&T25_));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	inverse__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_844(T25_, (&mat));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI y;
		NI i;
		y = (NI)0;
		i = ((NI) 0);
		{
			while (1) {
				if (!(i < (*image).height)) goto LA28;
				y = i;
				{
					NI x;
					NI i_2;
					x = (NI)0;
					i_2 = ((NI) 0);
					{
						while (1) {
							tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g xy;
							NF32 t;
							tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T32_;
							tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T33_;
							tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T34_;
							NI T35_;
							tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw T36_;
							if (!(i_2 < (*image).width)) goto LA31;
							x = i_2;
							xy = vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979(((NF32) (x)), ((NF32) (y)));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							T32_ = star___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_214(mat, xy);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							t = length__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_455(T32_);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							nimZeroMem((void*)(&T33_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							nimZeroMem((void*)(&T33_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							T33_.image = image;
							nimZeroMem((void*)(&T34_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							nimZeroMem((void*)(&T34_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							T34_.image = image;
							T35_ = (NI)0;
							T35_ = dataIndex__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_171(T34_.image, x, y);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							nimZeroMem((void*)(&T36_), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
							T36_ = gradientColor__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_180(paint, t);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							(*T33_.image).data.p->data[T35_] = T36_;
							i_2 += ((NI) 1);
						} LA31: ;
					}
				}
				i += ((NI) 1);
			} LA28: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, fillGradientAngular__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_506)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint) {
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g center;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g edge;
	NF32 f32PI;
	NF32 gradientAngle;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T17_;
	tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T18_;
	NF32 T19_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NI T3_;
		tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ* T6_;
		T3_ = (*paint).gradientHandlePositions.len;
		if (!!((T3_ == ((NI) 3)))) goto LA4_;
		T6_ = NIM_NIL;
		T6_ = (tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ*) nimNewObj(sizeof(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ), NIM_ALIGNOF(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ));
		(*T6_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__iGcRqvltYLQCoM1tI9cqukQ_);
		(*T6_).Sup.Sup.Sup.name = "PixieError";
		(*T6_).Sup.Sup.Sup.message = TM__Fzim5ZkfCOtV9auTP9aiMPew_10;
		(*T6_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T6_, "PixieError", "fillGradientAngular", "paints.nim", 206);
		goto BeforeRet_;
	}
	LA4_: ;
	{
		NI T9_;
		tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ* T12_;
		T9_ = (*paint).gradientStops.len;
		if (!(T9_ == ((NI) 0))) goto LA10_;
		T12_ = NIM_NIL;
		T12_ = (tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ*) nimNewObj(sizeof(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ), NIM_ALIGNOF(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ));
		(*T12_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__iGcRqvltYLQCoM1tI9cqukQ_);
		(*T12_).Sup.Sup.Sup.name = "PixieError";
		(*T12_).Sup.Sup.Sup.message = TM__Fzim5ZkfCOtV9auTP9aiMPew_11;
		(*T12_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T12_, "PixieError", "fillGradientAngular", "paints.nim", 209);
		goto BeforeRet_;
	}
	LA10_: ;
	{
		if (!((*paint).opacity == 0.0f)) goto LA15_;
		goto BeforeRet_;
	}
	LA15_: ;
	center = (*paint).gradientHandlePositions.p->data[((NI) 0)];
	edge = (*paint).gradientHandlePositions.p->data[((NI) 1)];
	f32PI = 3.1415927f;
	T17_ = minus___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_441(edge, center);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T18_ = normalize__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1592(T17_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	T19_ = (NF32)0;
	T19_ = angle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_376(T18_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	gradientAngle = fixAngle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_382(T19_);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NI y;
		NI i;
		y = (NI)0;
		i = ((NI) 0);
		{
			while (1) {
				if (!(i < (*image).height)) goto LA22;
				y = i;
				{
					NI x;
					NI i_2;
					x = (NI)0;
					i_2 = ((NI) 0);
					{
						while (1) {
							tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g xy;
							NF32 angle;
							tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T26_;
							tyObject_GVec2__J49cfF9bdMVXReouL81K5F4g T27_;
							NF32 t;
							NF32 T28_;
							tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T29_;
							tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg T30_;
							NI T31_;
							tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw T32_;
							if (!(i_2 < (*image).width)) goto LA25;
							x = i_2;
							xy = vec2__OOZOOZOOZOnimbleZpkgsZvmath4549O49O48Zvmath_979(((NF32) (x)), ((NF32) (y)));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							T26_ = minus___OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_441(xy, center);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							T27_ = normalize__OOZOOZOOZOnimbleZpkgsZbumpy4549O48O51Zbumpy_1592(T26_);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							angle = angle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_376(T27_);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							T28_ = (NF32)0;
							T28_ = fixAngle__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_382(((NF32)(((NF32)(angle) + (NF32)(gradientAngle))) + (NF32)(((NF32)(f32PI) / (NF32)(2.0f)))));
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							t = ((NF32)(((NF32)(((NF32)(T28_) / (NF32)(2.0f))) / (NF32)(f32PI))) + (NF32)(0.5f));
							nimZeroMem((void*)(&T29_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							nimZeroMem((void*)(&T29_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							T29_.image = image;
							nimZeroMem((void*)(&T30_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							nimZeroMem((void*)(&T30_), sizeof(tyObject_UnsafeImage__f9asuvEfWdaEsvgzcPPDmeg));
							T30_.image = image;
							T31_ = (NI)0;
							T31_ = dataIndex__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_171(T30_.image, x, y);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							nimZeroMem((void*)(&T32_), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
							T32_ = gradientColor__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_180(paint, t);
							if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
							(*T29_.image).data.p->data[T31_] = T32_;
							i_2 += ((NI) 1);
						} LA25: ;
					}
				}
				i += ((NI) 1);
			} LA22: ;
		}
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, fillGradient__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_599)(tyObject_ImagecolonObjectType___39aQ9a0Kyr06g9bwSFcLPwwXw* image, tyObject_PaintcolonObjectType___RPVQ9b0cLeY9bq12kLqE9coRQ* paint) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	switch ((*paint).kind) {
	case ((tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw) 3):
	{
		fillGradientLinear__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_226(image, paint);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw) 4):
	{
		fillGradientRadial__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_318(image, paint);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	case ((tyEnum_PaintKind__iwHWd8VQDvuMLumia4drcw) 5):
	{
		fillGradientAngular__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaints_506(image, paint);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	break;
	default:
	{
		tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ* T5_;
		T5_ = NIM_NIL;
		T5_ = (tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ*) nimNewObj(sizeof(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ), NIM_ALIGNOF(tyObject_PixieError__iGcRqvltYLQCoM1tI9cqukQ));
		(*T5_).Sup.Sup.Sup.Sup.m_type = (&NTIv2__iGcRqvltYLQCoM1tI9cqukQ_);
		(*T5_).Sup.Sup.Sup.name = "PixieError";
		(*T5_).Sup.Sup.Sup.message = TM__Fzim5ZkfCOtV9auTP9aiMPew_13;
		(*T5_).Sup.Sup.Sup.parent = ((Exception*) NIM_NIL);
		raiseExceptionEx((Exception*)T5_, "PixieError", "fillGradient", "paints.nim", 239);
		goto BeforeRet_;
	}
	break;
	}
	}BeforeRet_: ;
}
