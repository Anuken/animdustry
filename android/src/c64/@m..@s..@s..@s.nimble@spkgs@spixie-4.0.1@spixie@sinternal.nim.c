/* Generated by Nim Compiler v1.6.4 */
#define NIM_INTBITS 64
#define NIM_EmulateOverflowChecks

#include "nimbase.h"
#include <string.h>
#include <math.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct tySequence__SAu3TlCYLYik19b9aAxDCNzA tySequence__SAu3TlCYLYik19b9aAxDCNzA;
typedef struct tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content;
typedef struct tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw;
typedef struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ tySequence__6H5Oh5UUvVCLiakt9aTwtUQ;
typedef struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content;
struct tySequence__SAu3TlCYLYik19b9aAxDCNzA {
  NI len; tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content* p;
};
struct tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw {
NU8 r;
NU8 g;
NU8 b;
NU8 a;
};
typedef NU32 tyArray__JlnxiR65D9cjJpwi6uBZRtA[2];
struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ {
  NI len; tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content* p;
};


#ifndef tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content_PP
#define tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content_PP
struct tySequence__SAu3TlCYLYik19b9aAxDCNzA_Content { NI cap; tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content_PP
#define tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content_PP
struct tySequence__6H5Oh5UUvVCLiakt9aTwtUQ_Content { NI cap; NU8 data[SEQ_DECL_SIZE];};
#endif

      static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, asRgbx__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_226)(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw c);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZcolortypes_116)(NU8 r, NU8 g, NU8 b, NU8 a);
extern NIM_BOOL nimInErrorMode__system_3443;
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_3443);
	return result;
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_7(p, ((int) 0), size);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, asRgbx__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_226)(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw c) {
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw result;
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	result = c;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, fillUnsafe__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZpaths_3451)(tySequence__SAu3TlCYLYik19b9aAxDCNzA* data, tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw color, NI start, NI len) {
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw rgbx;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	rgbx = asRgbx__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZimages_226(color);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	{
		NIM_BOOL T3_;
		NIM_BOOL T4_;
		T3_ = (NIM_BOOL)0;
		T4_ = (NIM_BOOL)0;
		T4_ = (rgbx.r == rgbx.g);
		if (!(T4_)) goto LA5_;
		T4_ = (rgbx.r == rgbx.b);
		LA5_: ;
		T3_ = T4_;
		if (!(T3_)) goto LA6_;
		T3_ = (rgbx.r == rgbx.a);
		LA6_: ;
		if (!T3_) goto LA7_;
		nimSetMem__systemZmemory_7(((void*) ((&(*data).p->data[start]))), ((int) (rgbx.r)), ((NI) ((NI)(len * ((NI) 4)))));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	goto LA1_;
	LA7_: ;
	{
		NI i;
		NU32 u32;
		union { tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw source; NU32 dest; } LOC10;
		NU64 u64;
		union { tyArray__JlnxiR65D9cjJpwi6uBZRtA source; NU64 dest; } LOC11;
		i = start;
		LOC10.source = rgbx;
		u32 = LOC10.dest;
		LOC11.source[0] = u32;
		LOC11.source[1] = u32;
		u64 = LOC11.dest;
		{
			NI _;
			NI colontmp_;
			NI i_2;
			_ = (NI)0;
			colontmp_ = (NI)0;
			colontmp_ = (NI)(len / ((NI) 2));
			i_2 = ((NI) 0);
			{
				while (1) {
					if (!(i_2 < colontmp_)) goto LA14;
					_ = i_2;
					(*((NU64*) ((&(*data).p->data[i])))) = u64;
					i += ((NI) 2);
					i_2 += ((NI) 1);
				} LA14: ;
			}
		}
		{
			NI j;
			NI colontmp__2;
			NI i_3;
			j = (NI)0;
			colontmp__2 = (NI)0;
			colontmp__2 = (NI)(start + len);
			i_3 = i;
			{
				while (1) {
					if (!(i_3 < colontmp__2)) goto LA17;
					j = i_3;
					(*data).p->data[j] = rgbx;
					i_3 += ((NI) 1);
				} LA17: ;
			}
		}
	}
	LA1_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, fillUnsafe__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZinternal_98)(tySequence__6H5Oh5UUvVCLiakt9aTwtUQ* data, NU8 value, NI start, NI len) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_7(((void*) ((&(*data).p->data[start]))), ((int) (value)), ((NI) (len)));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZcolortypes_116)(NU8 r, NU8 g, NU8 b, NU8 a) {
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw result;
	NU8 colontmpD_;
	NU8 colontmpD__2;
	NU8 colontmpD__3;
	NU8 colontmpD__4;
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	colontmpD_ = (NU8)0;
	colontmpD__2 = (NU8)0;
	colontmpD__3 = (NU8)0;
	colontmpD__4 = (NU8)0;
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	colontmpD_ = r;
	result.r = colontmpD_;
	colontmpD__2 = g;
	result.g = colontmpD__2;
	colontmpD__3 = b;
	result.b = colontmpD__3;
	colontmpD__4 = a;
	result.a = colontmpD__4;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw, star___OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZinternal_89)(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw color, NF32 opacity) {
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw result;
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw colontmpD_;
	tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw colontmpD__2;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimZeroMem((void*)(&result), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_ColorRGBX__hrE0utwVpt2r9aS9b8RsUQgw));
	{
		if (!(opacity == 0.0f)) goto LA3_;
		colontmpD_ = rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZcolortypes_116(((NU8) 0), ((NU8) 0), ((NU8) 0), ((NU8) 0));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = colontmpD_;
	}
	goto LA1_;
	LA3_: ;
	{
		NU32 x;
		NF32 T6_;
		NU8 r;
		NU8 g;
		NU8 b;
		NU8 a;
		T6_ = (NF32)0;
		T6_ = roundf(((NF32)(opacity) * (NF32)(255.0f)));
		x = ((NU32) (T6_));
		r = ((NU8) ((NU32)((NU32)((NU32)((NU32)(((NU32) (color.r))) * (NU32)(x))) / (NU32)(((NU32) 255)))));
		g = ((NU8) ((NU32)((NU32)((NU32)((NU32)(((NU32) (color.g))) * (NU32)(x))) / (NU32)(((NU32) 255)))));
		b = ((NU8) ((NU32)((NU32)((NU32)((NU32)(((NU32) (color.b))) * (NU32)(x))) / (NU32)(((NU32) 255)))));
		a = ((NU8) ((NU32)((NU32)((NU32)((NU32)(((NU32) (color.a))) * (NU32)(x))) / (NU32)(((NU32) 255)))));
		colontmpD__2 = rgbx__OOZOOZOOZOnimbleZpkgsZchroma4548O50O53ZchromaZcolortypes_116(r, g, b, a);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		result = colontmpD__2;
	}
	LA1_: ;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isOpaque__OOZOOZOOZOnimbleZpkgsZpixie4552O48O49ZpixieZinternal_137)(tySequence__SAu3TlCYLYik19b9aAxDCNzA* data, NI start, NI len) {
	NIM_BOOL result;
	NI i;
{	result = (NIM_BOOL)0;
	result = NIM_TRUE;
	i = start;
	{
		NI j;
		NI colontmp_;
		NI i_2;
		j = (NI)0;
		colontmp_ = (NI)0;
		colontmp_ = (NI)(start + len);
		i_2 = i;
		{
			while (1) {
				if (!(i_2 < colontmp_)) goto LA3;
				j = i_2;
				{
					if (!!(((*data).p->data[j].a == ((NU8) 255)))) goto LA6_;
					result = NIM_FALSE;
					goto BeforeRet_;
				}
				LA6_: ;
				i_2 += ((NI) 1);
			} LA3: ;
		}
	}
	}BeforeRet_: ;
	return result;
}
