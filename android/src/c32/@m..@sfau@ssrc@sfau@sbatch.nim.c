/* Generated by Nim Compiler v1.6.4 */
#define NIM_INTBITS 32
#define NIM_EmulateOverflowChecks

#include "nimbase.h"
#include <string.h>
#include <math.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef far
#undef powerpc
#undef unix
#define nimfr_(x, y)
#define nimln_(x, y)
typedef struct tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA;
typedef struct tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg;
typedef struct tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw;
typedef struct tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ;
typedef struct tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ;
typedef struct tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ;
typedef struct tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ;
typedef struct tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ_Content tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ_Content;
typedef struct tyObject_Req__H68QjrbUnFwaMhvhofU5EQ tyObject_Req__H68QjrbUnFwaMhvhofU5EQ;
typedef struct tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ;
typedef struct tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w;
typedef struct tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg;
typedef struct tyObject_Patch__8QaUwC1IkZpFffoZ7KEkFA tyObject_Patch__8QaUwC1IkZpFffoZ7KEkFA;
typedef struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A;
typedef struct NimStrPayload NimStrPayload;
typedef struct NimStringV2 NimStringV2;
typedef struct tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ;
typedef struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og tySequence__pUxI6Ljo6IKKHXKOZkQ7Og;
typedef struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content;
typedef struct tyObject_Table__a9aFGxCEM6129c8Bf9cjeka9aw tyObject_Table__a9aFGxCEM6129c8Bf9cjeka9aw;
typedef struct tySequence__s9aRGEDrqx69bYD8TWX6AWeA tySequence__s9aRGEDrqx69bYD8TWX6AWeA;
typedef struct tySequence__s9aRGEDrqx69bYD8TWX6AWeA_Content tySequence__s9aRGEDrqx69bYD8TWX6AWeA_Content;
typedef struct tyObject_Vec2i__Vb00liq4ISM4Oc07yydBJQ tyObject_Vec2i__Vb00liq4ISM4Oc07yydBJQ;
typedef struct tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg;
typedef struct tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw;
typedef struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA;
typedef struct tySequence__PARCrxqvYn0HEzfqCVdrBg tySequence__PARCrxqvYn0HEzfqCVdrBg;
typedef struct tySequence__PARCrxqvYn0HEzfqCVdrBg_Content tySequence__PARCrxqvYn0HEzfqCVdrBg_Content;
typedef struct tySequence__uFLLGQVsiasALrzzzvqnZw tySequence__uFLLGQVsiasALrzzzvqnZw;
typedef struct tySequence__uFLLGQVsiasALrzzzvqnZw_Content tySequence__uFLLGQVsiasALrzzzvqnZw_Content;
typedef struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ;
typedef struct tyTuple__9cPYCugXZVVKLkBMRxkZXSA tyTuple__9cPYCugXZVVKLkBMRxkZXSA;
typedef struct tyObject_ShaderAttr__YLfRa9av9azfSk49bF6ygpRFw tyObject_ShaderAttr__YLfRa9av9azfSk49bF6ygpRFw;
struct tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ {
NU32 src;
NU32 dst;
};
struct tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ {
  NI len; tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ_Content* p;
};
typedef NF32 tyArray__mEOj6RCJtUq5VS5mI7S2ew[9];
struct tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA {
tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg* mesh;
tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* defaultShader;
tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* lastShader;
tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* lastTexture;
tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ lastBlend;
tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* buffer;
NI index;
NI size;
tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ req;
tyArray__mEOj6RCJtUq5VS5mI7S2ew mat;
tyArray__mEOj6RCJtUq5VS5mI7S2ew matInv;
NIM_BOOL sort;
};
typedef struct {
N_NIMCALL_PTR(NI, ClP_0) (tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* x, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* y, void* ClE_0);
void* ClE_0;
} tyProc__Fx2AFifABb7WhUUegOH7wA;
typedef NU8 tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA;
typedef NU8 tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg;
struct tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w {
NF32 x;
NF32 y;
};
struct tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg {
NU8 rv;
NU8 gv;
NU8 bv;
NU8 av;
};
struct tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ {
tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w pos;
tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w uv;
tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg color;
tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg mixcolor;
};
typedef tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ tyArray__1wS2mKS0Tpo9aj1cMUR70bA[4];
struct tyObject_Patch__8QaUwC1IkZpFffoZ7KEkFA {
tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* texture;
NF32 u;
NF32 v;
NF32 u2;
NF32 v2;
};
typedef struct {
N_NIMCALL_PTR(void, ClP_0) (void* ClE_0);
void* ClE_0;
} tyProc__HzVCwACFYM9cx9aV62PdjtuA;
struct tyObject_Req__H68QjrbUnFwaMhvhofU5EQ {
tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ blend;
tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* shader;
NF32 z;
tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg kind;
union{
struct {tyArray__1wS2mKS0Tpo9aj1cMUR70bA verts;
tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* tex;
} _kind_1;
struct {tyObject_Patch__8QaUwC1IkZpFffoZ7KEkFA patch;
tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w pos;
tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w origin;
tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w size;
NF32 rotation;
tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg color;
tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg mixColor;
} _kind_2;
struct {tyProc__HzVCwACFYM9cx9aV62PdjtuA draw;
} _kind_3;
};
};
struct tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A {
NI rc;
};
struct NimStrPayload {
NI cap;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct NimStringV2 {
NI len;
NimStrPayload* p;
};
struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og {
  NI len; tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content* p;
};
struct tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ {
tySequence__pUxI6Ljo6IKKHXKOZkQ7Og data;
NI counter;
};
struct tySequence__s9aRGEDrqx69bYD8TWX6AWeA {
  NI len; tySequence__s9aRGEDrqx69bYD8TWX6AWeA_Content* p;
};
struct tyObject_Table__a9aFGxCEM6129c8Bf9cjeka9aw {
tySequence__s9aRGEDrqx69bYD8TWX6AWeA data;
NI counter;
};
struct tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw {
NU32 handle;
NU32 vertHandle;
NU32 fragHandle;
NimStringV2 compileLog;
NIM_BOOL compiled;
tyObject_Table__i55W8RrwGKsG9cl0sAKxgkQ uniforms;
tyObject_Table__a9aFGxCEM6129c8Bf9cjeka9aw attributes;
};
typedef NU8 tyEnum_TextureWrap__u5t9aRlFqNYWEA2nuqy9c2aw;
typedef NU8 tyEnum_TextureFilter__zerQ3LMmc801hL4AG54gqg;
struct tyObject_Vec2i__Vb00liq4ISM4Oc07yydBJQ {
NI x;
NI y;
};
struct tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ {
NU32 handle;
tyEnum_TextureWrap__u5t9aRlFqNYWEA2nuqy9c2aw uwrap;
tyEnum_TextureWrap__u5t9aRlFqNYWEA2nuqy9c2aw vwrap;
tyEnum_TextureFilter__zerQ3LMmc801hL4AG54gqg minfilter;
tyEnum_TextureFilter__zerQ3LMmc801hL4AG54gqg magfilter;
NU32 target;
tyObject_Vec2i__Vb00liq4ISM4Oc07yydBJQ size;
};
typedef N_CLOSURE_PTR(NI, TM__G37V9b0gV1DLL4f9c49aj9a7Xg_2) (tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* x, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* y, void* ClE_0);
struct tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg {
tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* texture;
NI index;
};
typedef NU8 tyEnum_CullFace__0G6mOarn9cnCWCzi0fEshew;
struct tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw {
tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* buffer;
NI offset;
NI count;
NIM_BOOL depth;
NIM_BOOL writeDepth;
tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ blend;
tyEnum_CullFace__0G6mOarn9cnCWCzi0fEshew cullFace;
};
struct tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA {
NI a;
NI b;
};
struct tySequence__PARCrxqvYn0HEzfqCVdrBg {
  NI len; tySequence__PARCrxqvYn0HEzfqCVdrBg_Content* p;
};
struct tySequence__uFLLGQVsiasALrzzzvqnZw {
  NI len; tySequence__uFLLGQVsiasALrzzzvqnZw_Content* p;
};
struct tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg {
tySequence__PARCrxqvYn0HEzfqCVdrBg vertices;
tySequence__uFLLGQVsiasALrzzzvqnZw indices;
NU32 vertexBuffer;
NU32 indexBuffer;
NIM_BOOL isStatic;
NIM_BOOL modifiedVert;
NIM_BOOL modifiedInd;
tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA vertSlice;
tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA indSlice;
NU32 primitiveType;
};
typedef N_CLOSURE_PTR(void, TM__G37V9b0gV1DLL4f9c49aj9a7Xg_7) (void);
typedef NU8 tySet_tyEnum_AlignSide__jWvoggOy3F9ah9a9b9c9blEGvIg;


#ifndef tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ_Content_PP
#define tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ_Content_PP
struct tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ_Content { NI cap; tyObject_Req__H68QjrbUnFwaMhvhofU5EQ data[SEQ_DECL_SIZE];};
#endif

      struct tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ {
NI Field0;
NimStringV2 Field1;
NI Field2;
};


#ifndef tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content_PP
#define tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content_PP
struct tySequence__pUxI6Ljo6IKKHXKOZkQ7Og_Content { NI cap; tyTuple__sr3s7uVHpu9cEbbDnCSg8yQ data[SEQ_DECL_SIZE];};
#endif

      struct tyObject_ShaderAttr__YLfRa9av9azfSk49bF6ygpRFw {
NimStringV2 name;
NU32 gltype;
NI32 size;
NI32 length;
NI32 location;
};
struct tyTuple__9cPYCugXZVVKLkBMRxkZXSA {
NI Field0;
NimStringV2 Field1;
tyObject_ShaderAttr__YLfRa9av9azfSk49bF6ygpRFw Field2;
};


#ifndef tySequence__s9aRGEDrqx69bYD8TWX6AWeA_Content_PP
#define tySequence__s9aRGEDrqx69bYD8TWX6AWeA_Content_PP
struct tySequence__s9aRGEDrqx69bYD8TWX6AWeA_Content { NI cap; tyTuple__9cPYCugXZVVKLkBMRxkZXSA data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__PARCrxqvYn0HEzfqCVdrBg_Content_PP
#define tySequence__PARCrxqvYn0HEzfqCVdrBg_Content_PP
struct tySequence__PARCrxqvYn0HEzfqCVdrBg_Content { NI cap; tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__uFLLGQVsiasALrzzzvqnZw_Content_PP
#define tySequence__uFLLGQVsiasALrzzzvqnZw_Content_PP
struct tySequence__uFLLGQVsiasALrzzzvqnZw_Content { NI cap; NU16 data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__uFLLGQVsiasALrzzzvqnZw_Content_PP
#define tySequence__uFLLGQVsiasALrzzzvqnZw_Content_PP
struct tySequence__uFLLGQVsiasALrzzzvqnZw_Content { NI cap; NU16 data[SEQ_DECL_SIZE];};
#endif

      

#ifndef tySequence__PARCrxqvYn0HEzfqCVdrBg_Content_PP
#define tySequence__PARCrxqvYn0HEzfqCVdrBg_Content_PP
struct tySequence__PARCrxqvYn0HEzfqCVdrBg_Content { NI cap; tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ data[SEQ_DECL_SIZE];};
#endif

      N_LIB_PRIVATE N_NIMCALL(void, sort__OOZfauZsrcZfauZbatch_787)(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* a, NI aLen_0, tyProc__Fx2AFifABb7WhUUegOH7wA cmp, tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA order);
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p);
static N_INLINE(NI, minuspercent___system_716)(NI x, NI y);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZshader_44)(tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* shader);
N_LIB_PRIVATE N_NIMCALL(void, nimRawDispose)(void* p, NI alignment);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZtexture_28)(tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* texture);
N_LIB_PRIVATE N_NIMCALL(void, nimDestroyAndDispose)(void* p);
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size);
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void);
N_LIB_PRIVATE N_NIMCALL(void, alignedDealloc)(void* p, NI align);
N_LIB_PRIVATE N_NIMCALL(NI, colonanonymous___OOZfauZsrcZfauZbatch_755)(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* a, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* b);
N_LIB_PRIVATE N_NIMCALL(NI, cmp__OOZfauZsrcZfauZbatch_767)(NF32 x, NF32 y);
static N_INLINE(void, nimZeroMem)(void* p, NI size);
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size);
N_LIB_PRIVATE N_NIMCALL(void, draw__OOZfauZsrcZfauZbatch_294)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* req);
N_LIB_PRIVATE N_NIMCALL(void, add__OOZfauZsrcZfauZbatch_297)(tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ* x, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* value);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___OOZfauZsrcZfauZbatch_352)(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* dest, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* src);
static N_INLINE(void, nimIncRef)(void* p);
N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, eqeq___OOZfauZsrcZfauZbatch_254)(tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ x, tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ y);
N_LIB_PRIVATE N_NIMCALL(void, flushInternal__OOZfauZsrcZfauZbatch_68)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZmesh_116)(tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZshader_3359)(tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZshader_1652)(tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw** dest);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___OOZfauZsrcZfauZshader_1655)(tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw** dest, tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* src);
N_LIB_PRIVATE N_NIMCALL(void, updateVertices__OOZfauZsrcZfauZbatch_104)(tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg* mesh, tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA slice);
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___pureZunicode_914)(NI a, NI b);
N_LIB_PRIVATE N_NIMCALL(void, uniform__OOZfauZsrcZfauZshader_3379)(tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* shader, NimStringV2 name, tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg value);
N_LIB_PRIVATE N_NIMCALL(void, sampler__OOZfauZsrcZfauZshader_3355)(tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* tex, NI index, tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg* Result);
N_LIB_PRIVATE N_NIMCALL(void, uniform__OOZfauZsrcZfauZshader_3389)(tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* shader, NimStringV2 name, tyArray__mEOj6RCJtUq5VS5mI7S2ew value);
N_LIB_PRIVATE N_NIMCALL(void, renderInternal__OOZfauZsrcZfauZbatch_125)(tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg* mesh, tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* shader, tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw* args);
static N_INLINE(void, meshParams__OOZfauZsrcZfauZmesh_98)(tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* buffer, NI offset, NI count, NIM_BOOL depth, NIM_BOOL writeDepth, tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ blend, tyEnum_CullFace__0G6mOarn9cnCWCzi0fEshew cullFace, tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw* Result);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___OOZfauZsrcZfauZframebuffer_73)(tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ** dest, tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* src);
N_LIB_PRIVATE N_NIMCALL(void, prepare__OOZfauZsrcZfauZbatch_287)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch, tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* texture);
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___OOZfauZsrcZfauZtexture_116)(tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ** dest, tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* src);
N_LIB_PRIVATE N_NIMCALL(void, setLen__OOZfauZsrcZfauZbatch_644)(tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ* s, NI newlen);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_612)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_585)(tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZframebuffer_14)(tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* buffer);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_626)(tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ* dest);
N_LIB_PRIVATE N_NIMCALL(void*, nimNewObj)(NI size, NI alignment);
N_LIB_PRIVATE N_NIMCALL(tyObject_MeshObj__9bGj6Bfoo471UiZzEq6awZg*, newMesh__OOZfauZsrcZfauZbatch_568)(NIM_BOOL isStatic, NU32 primitiveType, tySequence__PARCrxqvYn0HEzfqCVdrBg vertices, tySequence__uFLLGQVsiasALrzzzvqnZw indices);
N_LIB_PRIVATE N_NIMCALL(tySequence__PARCrxqvYn0HEzfqCVdrBg, newSeq__OOZfauZsrcZfauZbatch_527)(NI len);
N_LIB_PRIVATE N_NIMCALL(tySequence__uFLLGQVsiasALrzzzvqnZw, newSeq__OOZfauZsrcZfauZbatch_560)(NI len);
N_LIB_PRIVATE N_NIMCALL(void, eqsink___OOZfauZsrcZfauZshader_1658)(tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw** dest, tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* src);
N_LIB_PRIVATE N_NIMCALL(tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw*, newShader__OOZfauZsrcZfauZshader_65)(NimStringV2 vertexSource, NimStringV2 fragmentSource);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZOOZOOZOnimbleZpkgsZstb95image4550O53Zstb95imageZread_264)(tySequence__uFLLGQVsiasALrzzzvqnZw* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_535)(tySequence__PARCrxqvYn0HEzfqCVdrBg* dest);
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_723)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA** dest);
N_LIB_PRIVATE N_NIMCALL(void, flush__OOZfauZsrcZfauZbatch_735)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch);
N_LIB_PRIVATE N_NIMCALL(void, inv__OOZfauZsrcZfauZfmath_1246)(tyArray__mEOj6RCJtUq5VS5mI7S2ew self, tyArray__mEOj6RCJtUq5VS5mI7S2ew Result);
static const struct {
  NI cap; NIM_CHAR data[9+1];
} TM__G37V9b0gV1DLL4f9c49aj9a7Xg_3 = { 9 | NIM_STRLIT_FLAG, "u_texture" };
static const NimStringV2 TM__G37V9b0gV1DLL4f9c49aj9a7Xg_4 = {9, (NimStrPayload*)&TM__G37V9b0gV1DLL4f9c49aj9a7Xg_3};
static const struct {
  NI cap; NIM_CHAR data[6+1];
} TM__G37V9b0gV1DLL4f9c49aj9a7Xg_5 = { 6 | NIM_STRLIT_FLAG, "u_proj" };
static const NimStringV2 TM__G37V9b0gV1DLL4f9c49aj9a7Xg_6 = {6, (NimStrPayload*)&TM__G37V9b0gV1DLL4f9c49aj9a7Xg_5};
static const struct {
  NI cap; NIM_CHAR data[321+1];
} TM__G37V9b0gV1DLL4f9c49aj9a7Xg_8 = { 321 | NIM_STRLIT_FLAG, "  attribute vec4 a_pos;\012  attribute vec4 a_color;\012  attribute vec2 a_uv;\012  attribute vec4 a_mixcolor;\012  uniform mat4 u_proj;\012  varying vec4 v_color;\012  varying vec4 v_mixcolor;\012  varying vec2 v_uv;\012  void main(){\012    v_color = a_color;\012    v_mixcolor = a_mixcolor;\012    v_uv = a_uv;\012    gl_Position = u_proj * a_pos;\012  }\012  " };
static const NimStringV2 TM__G37V9b0gV1DLL4f9c49aj9a7Xg_9 = {321, (NimStrPayload*)&TM__G37V9b0gV1DLL4f9c49aj9a7Xg_8};
static const struct {
  NI cap; NIM_CHAR data[253+1];
} TM__G37V9b0gV1DLL4f9c49aj9a7Xg_10 = { 253 | NIM_STRLIT_FLAG, "  varying lowp vec4 v_color;\012  varying lowp vec4 v_mixcolor;\012  varying vec2 v_uv;\012  uniform sampler2D u_texture;\012  void main(){\012    vec4 c = texture2D(u_texture, v_uv);\012    gl_FragColor = v_color * mix(c, vec4(v_mixcolor.rgb, c.a), v_mixcolor.a);\012  }\012  " };
static const NimStringV2 TM__G37V9b0gV1DLL4f9c49aj9a7Xg_11 = {253, (NimStrPayload*)&TM__G37V9b0gV1DLL4f9c49aj9a7Xg_10};
N_LIB_PRIVATE NIM_CONST tySet_tyEnum_AlignSide__jWvoggOy3F9ah9a9b9c9blEGvIg daBot__OOZfauZsrcZfauZbatch_62 = 8;
extern NIM_BOOL nimInErrorMode__system_3443;
extern tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* screen__OOZfauZsrcZfauZscreenbuffer_2;
static N_INLINE(NI, minuspercent___system_716)(NI x, NI y) {
	NI result;
	result = (NI)0;
	result = ((NI) ((NU)((NU32)(((NU) (x))) - (NU32)(((NU) (y))))));
	return result;
}
static N_INLINE(NIM_BOOL, nimDecRefIsLast)(void* p) {
	NIM_BOOL result;
	result = (NIM_BOOL)0;
	{
		tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A* cell;
		NI T5_;
		if (!!((p == NIM_NIL))) goto LA3_;
		T5_ = (NI)0;
		T5_ = minuspercent___system_716(((NI) (ptrdiff_t) (p)), ((NI) 4));
		cell = ((tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A*) (T5_));
		{
			if (!((NI)((*cell).rc & ((NI) -8)) == ((NI) 0))) goto LA8_;
			result = NIM_TRUE;
		}
		goto LA6_;
		LA8_: ;
		{
			(*cell).rc -= ((NI) 8);
		}
		LA6_: ;
	}
	LA3_: ;
	return result;
}
static N_INLINE(void, nimCopyMem)(void* dest, void* source, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memcpy(dest, source, ((size_t) (size)));
}
static N_INLINE(NIM_BOOL*, nimErrorFlag)(void) {
	NIM_BOOL* result;
	result = (NIM_BOOL*)0;
	result = (&nimInErrorMode__system_3443);
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___OOZfauZsrcZfauZbatch_355)(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* dest, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* src) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	(*dest).blend.src = (*src).blend.src;
	(*dest).blend.dst = (*src).blend.dst;
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).shader);
		if (!T3_) goto LA4_;
		eqdestroy___OOZfauZsrcZfauZshader_44((*dest).shader);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest).shader, ((NI) 4));
	}
	LA4_: ;
	(*dest).shader = (*src).shader;
	(*dest).z = (*src).z;
	switch ((*dest).kind) {
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 0):
	{
		{
			NIM_BOOL T9_;
			T9_ = (NIM_BOOL)0;
			T9_ = nimDecRefIsLast((*dest)._kind_1.tex);
			if (!T9_) goto LA10_;
			eqdestroy___OOZfauZsrcZfauZtexture_28((*dest)._kind_1.tex);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimRawDispose((*dest)._kind_1.tex, ((NI) 4));
		}
		LA10_: ;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 1):
	{
		{
			NIM_BOOL T15_;
			T15_ = (NIM_BOOL)0;
			T15_ = nimDecRefIsLast((*dest)._kind_2.patch.texture);
			if (!T15_) goto LA16_;
			eqdestroy___OOZfauZsrcZfauZtexture_28((*dest)._kind_2.patch.texture);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimRawDispose((*dest)._kind_2.patch.texture, ((NI) 4));
		}
		LA16_: ;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 2):
	{
		{
			NIM_BOOL T21_;
			T21_ = (NIM_BOOL)0;
			T21_ = nimDecRefIsLast((*dest)._kind_3.draw.ClE_0);
			if (!T21_) goto LA22_;
			nimDestroyAndDispose((*dest)._kind_3.draw.ClE_0);
		}
		LA22_: ;
	}
	break;
	}
	(*dest).kind = (*src).kind;
	switch ((*dest).kind) {
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 0):
	{
		nimCopyMem((void*)(*dest)._kind_1.verts, (NIM_CONST void*)(*src)._kind_1.verts, sizeof(tyArray__1wS2mKS0Tpo9aj1cMUR70bA));
		(*dest)._kind_1.tex = (*src)._kind_1.tex;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 1):
	{
		(*dest)._kind_2.patch = (*src)._kind_2.patch;
		(*dest)._kind_2.pos = (*src)._kind_2.pos;
		(*dest)._kind_2.origin = (*src)._kind_2.origin;
		(*dest)._kind_2.size = (*src)._kind_2.size;
		(*dest)._kind_2.rotation = (*src)._kind_2.rotation;
		(*dest)._kind_2.color = (*src)._kind_2.color;
		(*dest)._kind_2.mixColor = (*src)._kind_2.mixColor;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 2):
	{
		(*dest)._kind_3.draw.ClE_0 = (*src)._kind_3.draw.ClE_0;
		(*dest)._kind_3.draw.ClP_0 = (*src)._kind_3.draw.ClP_0;
	}
	break;
	}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_626)(tySequence__SM9c8VrFxWOkIeeRsbw9bbeQ* dest) {
	NI colontmp_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmp_ = ((NI) 0);
	{
		while (1) {
			NI T3_;
			T3_ = (*dest).len;
			if (!(colontmp_ < T3_)) goto LA2;
			{
				NIM_BOOL T6_;
				T6_ = (NIM_BOOL)0;
				T6_ = nimDecRefIsLast((*dest).p->data[colontmp_].shader);
				if (!T6_) goto LA7_;
				eqdestroy___OOZfauZsrcZfauZshader_44((*dest).p->data[colontmp_].shader);
				if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
				nimRawDispose((*dest).p->data[colontmp_].shader, ((NI) 4));
			}
			LA7_: ;
			switch ((*dest).p->data[colontmp_].kind) {
			case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 0):
			{
				{
					NIM_BOOL T12_;
					T12_ = (NIM_BOOL)0;
					T12_ = nimDecRefIsLast((*dest).p->data[colontmp_]._kind_1.tex);
					if (!T12_) goto LA13_;
					eqdestroy___OOZfauZsrcZfauZtexture_28((*dest).p->data[colontmp_]._kind_1.tex);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimRawDispose((*dest).p->data[colontmp_]._kind_1.tex, ((NI) 4));
				}
				LA13_: ;
			}
			break;
			case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 1):
			{
				{
					NIM_BOOL T18_;
					T18_ = (NIM_BOOL)0;
					T18_ = nimDecRefIsLast((*dest).p->data[colontmp_]._kind_2.patch.texture);
					if (!T18_) goto LA19_;
					eqdestroy___OOZfauZsrcZfauZtexture_28((*dest).p->data[colontmp_]._kind_2.patch.texture);
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					nimRawDispose((*dest).p->data[colontmp_]._kind_2.patch.texture, ((NI) 4));
				}
				LA19_: ;
			}
			break;
			case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 2):
			{
				{
					NIM_BOOL T24_;
					T24_ = (NIM_BOOL)0;
					T24_ = nimDecRefIsLast((*dest).p->data[colontmp_]._kind_3.draw.ClE_0);
					if (!T24_) goto LA25_;
					nimDestroyAndDispose((*dest).p->data[colontmp_]._kind_3.draw.ClE_0);
				}
				LA25_: ;
			}
			break;
			}
			colontmp_ += ((NI) 1);
		} LA2: ;
	}
	if ((*dest).p && !((*dest).p->cap & NIM_STRLIT_FLAG)) {
 alignedDealloc((*dest).p, NIM_ALIGNOF(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ));
}
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(NI, colonanonymous___OOZfauZsrcZfauZbatch_755)(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* a, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* b) {
	NI result;
	result = (NI)0;
	result = cmp__OOZfauZsrcZfauZbatch_767((*a).z, (*b).z);
	return result;
}
static N_INLINE(void, nimSetMem__systemZmemory_7)(void* a, int v, NI size) {
	void* T1_;
	T1_ = (void*)0;
	T1_ = memset(a, v, ((size_t) (size)));
}
static N_INLINE(void, nimZeroMem)(void* p, NI size) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	nimSetMem__systemZmemory_7(p, ((int) 0), size);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
static N_INLINE(void, nimIncRef)(void* p) {
	NI T1_;
	T1_ = (NI)0;
	T1_ = minuspercent___system_716(((NI) (ptrdiff_t) (p)), ((NI) 4));
	(*((tyObject_RefHeader__Gi7WQzlT1ZRToh9a2ueYb4A*) (T1_))).rc += ((NI) 8);
}
N_LIB_PRIVATE N_NIMCALL(void, eqcopy___OOZfauZsrcZfauZbatch_352)(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* dest, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* src) {
	tyObject_Req__H68QjrbUnFwaMhvhofU5EQ colontmp_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		if (!(dest == src)) goto LA3_;
		goto BeforeRet_;
	}
	LA3_: ;
	nimZeroMem((void*)(&colontmp_), sizeof(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ));
	colontmp_ = (*dest);
	nimZeroMem((void*)(&(*dest)), sizeof(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ));
	(*dest).blend.src = (*src).blend.src;
	(*dest).blend.dst = (*src).blend.dst;
	{
		if (!(*src).shader) goto LA7_;
		nimIncRef((*src).shader);
	}
	LA7_: ;
	{
		NIM_BOOL T11_;
		T11_ = (NIM_BOOL)0;
		T11_ = nimDecRefIsLast((*dest).shader);
		if (!T11_) goto LA12_;
		eqdestroy___OOZfauZsrcZfauZshader_44((*dest).shader);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest).shader, ((NI) 4));
	}
	LA12_: ;
	(*dest).shader = (*src).shader;
	(*dest).z = (*src).z;
	(*dest).kind = (*src).kind;
	switch ((*dest).kind) {
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 0):
	{
		nimCopyMem((void*)(*dest)._kind_1.verts, (NIM_CONST void*)(*src)._kind_1.verts, sizeof(tyArray__1wS2mKS0Tpo9aj1cMUR70bA));
		{
			if (!(*src)._kind_1.tex) goto LA17_;
			nimIncRef((*src)._kind_1.tex);
		}
		LA17_: ;
		{
			NIM_BOOL T21_;
			T21_ = (NIM_BOOL)0;
			T21_ = nimDecRefIsLast((*dest)._kind_1.tex);
			if (!T21_) goto LA22_;
			eqdestroy___OOZfauZsrcZfauZtexture_28((*dest)._kind_1.tex);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimRawDispose((*dest)._kind_1.tex, ((NI) 4));
		}
		LA22_: ;
		(*dest)._kind_1.tex = (*src)._kind_1.tex;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 1):
	{
		{
			if (!(*src)._kind_2.patch.texture) goto LA27_;
			nimIncRef((*src)._kind_2.patch.texture);
		}
		LA27_: ;
		{
			NIM_BOOL T31_;
			T31_ = (NIM_BOOL)0;
			T31_ = nimDecRefIsLast((*dest)._kind_2.patch.texture);
			if (!T31_) goto LA32_;
			eqdestroy___OOZfauZsrcZfauZtexture_28((*dest)._kind_2.patch.texture);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimRawDispose((*dest)._kind_2.patch.texture, ((NI) 4));
		}
		LA32_: ;
		(*dest)._kind_2.patch.texture = (*src)._kind_2.patch.texture;
		(*dest)._kind_2.patch.u = (*src)._kind_2.patch.u;
		(*dest)._kind_2.patch.v = (*src)._kind_2.patch.v;
		(*dest)._kind_2.patch.u2 = (*src)._kind_2.patch.u2;
		(*dest)._kind_2.patch.v2 = (*src)._kind_2.patch.v2;
		(*dest)._kind_2.pos.x = (*src)._kind_2.pos.x;
		(*dest)._kind_2.pos.y = (*src)._kind_2.pos.y;
		(*dest)._kind_2.origin.x = (*src)._kind_2.origin.x;
		(*dest)._kind_2.origin.y = (*src)._kind_2.origin.y;
		(*dest)._kind_2.size.x = (*src)._kind_2.size.x;
		(*dest)._kind_2.size.y = (*src)._kind_2.size.y;
		(*dest)._kind_2.rotation = (*src)._kind_2.rotation;
		(*dest)._kind_2.color.rv = (*src)._kind_2.color.rv;
		(*dest)._kind_2.color.gv = (*src)._kind_2.color.gv;
		(*dest)._kind_2.color.bv = (*src)._kind_2.color.bv;
		(*dest)._kind_2.color.av = (*src)._kind_2.color.av;
		(*dest)._kind_2.mixColor.rv = (*src)._kind_2.mixColor.rv;
		(*dest)._kind_2.mixColor.gv = (*src)._kind_2.mixColor.gv;
		(*dest)._kind_2.mixColor.bv = (*src)._kind_2.mixColor.bv;
		(*dest)._kind_2.mixColor.av = (*src)._kind_2.mixColor.av;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 2):
	{
		{
			if (!(*src)._kind_3.draw.ClE_0) goto LA37_;
			nimIncRef((*src)._kind_3.draw.ClE_0);
		}
		LA37_: ;
		{
			NIM_BOOL T41_;
			T41_ = (NIM_BOOL)0;
			T41_ = nimDecRefIsLast((*dest)._kind_3.draw.ClE_0);
			if (!T41_) goto LA42_;
			nimDestroyAndDispose((*dest)._kind_3.draw.ClE_0);
		}
		LA42_: ;
		(*dest)._kind_3.draw.ClE_0 = (*src)._kind_3.draw.ClE_0;
		(*dest)._kind_3.draw.ClP_0 = (*src)._kind_3.draw.ClP_0;
	}
	break;
	}
	{
		NIM_BOOL T46_;
		T46_ = (NIM_BOOL)0;
		T46_ = nimDecRefIsLast(colontmp_.shader);
		if (!T46_) goto LA47_;
		eqdestroy___OOZfauZsrcZfauZshader_44(colontmp_.shader);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose(colontmp_.shader, ((NI) 4));
	}
	LA47_: ;
	switch (colontmp_.kind) {
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 0):
	{
		{
			NIM_BOOL T52_;
			T52_ = (NIM_BOOL)0;
			T52_ = nimDecRefIsLast(colontmp_._kind_1.tex);
			if (!T52_) goto LA53_;
			eqdestroy___OOZfauZsrcZfauZtexture_28(colontmp_._kind_1.tex);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimRawDispose(colontmp_._kind_1.tex, ((NI) 4));
		}
		LA53_: ;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 1):
	{
		{
			NIM_BOOL T58_;
			T58_ = (NIM_BOOL)0;
			T58_ = nimDecRefIsLast(colontmp_._kind_2.patch.texture);
			if (!T58_) goto LA59_;
			eqdestroy___OOZfauZsrcZfauZtexture_28(colontmp_._kind_2.patch.texture);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			nimRawDispose(colontmp_._kind_2.patch.texture, ((NI) 4));
		}
		LA59_: ;
	}
	break;
	case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 2):
	{
		{
			NIM_BOOL T64_;
			T64_ = (NIM_BOOL)0;
			T64_ = nimDecRefIsLast(colontmp_._kind_3.draw.ClE_0);
			if (!T64_) goto LA65_;
			nimDestroyAndDispose(colontmp_._kind_3.draw.ClE_0);
		}
		LA65_: ;
	}
	break;
	}
	}BeforeRet_: ;
}
static N_INLINE(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA, dotdot___pureZunicode_914)(NI a, NI b) {
	tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA result;
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	nimZeroMem((void*)(&result), sizeof(tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA));
	result.a = a;
	result.b = b;
	return result;
}
static N_INLINE(void, meshParams__OOZfauZsrcZfauZmesh_98)(tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* buffer, NI offset, NI count, NIM_BOOL depth, NIM_BOOL writeDepth, tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ blend, tyEnum_CullFace__0G6mOarn9cnCWCzi0fEshew cullFace, tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw* Result) {
	tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* colontmpD_;
	NI colontmpD__2;
	NI colontmpD__3;
	NIM_BOOL colontmpD__4;
	NIM_BOOL colontmpD__5;
	tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ colontmpD__6;
	tyEnum_CullFace__0G6mOarn9cnCWCzi0fEshew colontmpD__7;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	colontmpD_ = NIM_NIL;
	colontmpD__2 = (NI)0;
	colontmpD__3 = (NI)0;
	colontmpD__4 = (NIM_BOOL)0;
	colontmpD__5 = (NIM_BOOL)0;
	nimZeroMem((void*)(&colontmpD__6), sizeof(tyObject_Blending__hsAju9cB1hd79a6H4b5CoxVQ));
	colontmpD__7 = (tyEnum_CullFace__0G6mOarn9cnCWCzi0fEshew)0;
	nimZeroMem((void*)Result, sizeof(tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw));
	colontmpD_ = 0;
	eqcopy___OOZfauZsrcZfauZframebuffer_73(&colontmpD_, buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	(*Result).buffer = colontmpD_;
	colontmpD__2 = offset;
	(*Result).offset = colontmpD__2;
	colontmpD__3 = count;
	(*Result).count = colontmpD__3;
	colontmpD__4 = depth;
	(*Result).depth = colontmpD__4;
	colontmpD__5 = writeDepth;
	(*Result).writeDepth = colontmpD__5;
	colontmpD__6 = blend;
	(*Result).blend = colontmpD__6;
	colontmpD__7 = cullFace;
	(*Result).cullFace = colontmpD__7;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, flushInternal__OOZfauZsrcZfauZbatch_68)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch) {
	tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* shader;
	tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg colontmpD_;
	tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw colontmpD__2;
	tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* T6_;
	tyObject_HSlice__EE5dzjqoOrHT6HJhIPXAvA T12_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	shader = NIM_NIL;
	nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Sampler__xQXqueoTRZOwCBoD5nnvhg));
	nimZeroMem((void*)(&colontmpD__2), sizeof(tyObject_MeshParam__PTeep4m69bNi7Bk4ErRbSdw));
	{
		if (!((*batch).index == ((NI) 0))) goto LA4_;
		eqdestroy___OOZfauZsrcZfauZmesh_116((&colontmpD__2));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqdestroy___OOZfauZsrcZfauZshader_3359((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqdestroy___OOZfauZsrcZfauZshader_1652(&shader);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		goto BeforeRet_;
	}
	LA4_: ;
	T6_ = NIM_NIL;
	{
		if (!((*batch).lastShader == 0)) goto LA9_;
		eqcopy___OOZfauZsrcZfauZshader_1655(&shader, (*batch).defaultShader);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	goto LA7_;
	LA9_: ;
	{
		eqcopy___OOZfauZsrcZfauZshader_1655(&shader, (*batch).lastShader);
		if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	}
	LA7_: ;
	T12_ = dotdot___pureZunicode_914(((NI) 0), (NI)((*batch).index - ((NI) 1)));
	updateVertices__OOZfauZsrcZfauZbatch_104((*batch).mesh, T12_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	sampler__OOZfauZsrcZfauZshader_3355((*batch).lastTexture, ((NI) 0), (&colontmpD_));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	uniform__OOZfauZsrcZfauZshader_3379(shader, TM__G37V9b0gV1DLL4f9c49aj9a7Xg_4, colontmpD_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	uniform__OOZfauZsrcZfauZshader_3389(shader, TM__G37V9b0gV1DLL4f9c49aj9a7Xg_6, (*batch).mat);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	meshParams__OOZfauZsrcZfauZmesh_98((*batch).buffer, ((NI) 0), (NI)((NI)((*batch).index / ((NI) 4)) * ((NI) 6)), NIM_FALSE, NIM_TRUE, (*batch).lastBlend, ((tyEnum_CullFace__0G6mOarn9cnCWCzi0fEshew) 1), (&colontmpD__2));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	renderInternal__OOZfauZsrcZfauZbatch_125((*batch).mesh, shader, (&colontmpD__2));
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	(*batch).index = ((NI) 0);
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___OOZfauZsrcZfauZmesh_116((&colontmpD__2));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqdestroy___OOZfauZsrcZfauZshader_3359((&colontmpD_));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqdestroy___OOZfauZsrcZfauZshader_1652(&shader);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, prepare__OOZfauZsrcZfauZbatch_287)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch, tyObject_TextureObj__cVmPWt9bHJAYuqtGMTQozzQ* texture) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = !(((*batch).lastTexture == texture));
		if (T3_) goto LA4_;
		T3_ = ((*batch).size <= (*batch).index);
		LA4_: ;
		if (!T3_) goto LA5_;
		flushInternal__OOZfauZsrcZfauZbatch_68(batch);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		eqcopy___OOZfauZsrcZfauZtexture_116(&(*batch).lastTexture, texture);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}
	LA5_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, draw__OOZfauZsrcZfauZbatch_294)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch, tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* req) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		tyObject_Req__H68QjrbUnFwaMhvhofU5EQ colontmpD_;
		if (!(*batch).sort) goto LA3_;
		nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ));
		nimZeroMem((void*)(&colontmpD_), sizeof(tyObject_Req__H68QjrbUnFwaMhvhofU5EQ));
		eqcopy___OOZfauZsrcZfauZbatch_352((&colontmpD_), req);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		add__OOZfauZsrcZfauZbatch_297((&(*batch).req), (&colontmpD_));
	}
	goto LA1_;
	LA3_: ;
	{
		{
			NIM_BOOL T8_;
			NIM_BOOL T10_;
			T8_ = (NIM_BOOL)0;
			T8_ = !(((*batch).lastShader == (*req).shader));
			if (T8_) goto LA9_;
			T10_ = (NIM_BOOL)0;
			T10_ = eqeq___OOZfauZsrcZfauZbatch_254((*batch).lastBlend, (*req).blend);
			T8_ = !(T10_);
			LA9_: ;
			if (!T8_) goto LA11_;
			flushInternal__OOZfauZsrcZfauZbatch_68(batch);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			eqcopy___OOZfauZsrcZfauZshader_1655(&(*batch).lastShader, (*req).shader);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			(*batch).lastBlend = (*req).blend;
		}
		LA11_: ;
		switch ((*req).kind) {
		case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 0):
		{
			tySequence__PARCrxqvYn0HEzfqCVdrBg* verts;
			NI idx;
			prepare__OOZfauZsrcZfauZbatch_287(batch, (*req)._kind_1.tex);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			verts = (&(*(*batch).mesh).vertices);
			idx = (*batch).index;
			{
				NI i;
				NI i_2;
				i = (NI)0;
				i_2 = ((NI) 0);
				{
					while (1) {
						if (!(i_2 < ((NI) 4))) goto LA16;
						i = i_2;
						(*verts).p->data[(NI)(i + idx)] = (*req)._kind_1.verts[(i)- 0];
						i_2 += ((NI) 1);
					} LA16: ;
				}
			}
			(*batch).index += ((NI) 4);
		}
		break;
		case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 1):
		{
			prepare__OOZfauZsrcZfauZbatch_287(batch, (*req)._kind_2.patch.texture);
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
			{
				NF32 colontmpD__2;
				NF32 colontmpD__3;
				NF32 colontmpD__4;
				NF32 colontmpD__5;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__6;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__7;
				NF32 colontmpD__8;
				NF32 colontmpD__9;
				NF32 colontmpD__10;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__11;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__12;
				NF32 colontmpD__13;
				NF32 colontmpD__14;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__15;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__16;
				NF32 colontmpD__17;
				NF32 x2;
				NF32 y2;
				NF32 u;
				NF32 v;
				NF32 u2;
				NF32 v2;
				NI idx_2;
				tySequence__PARCrxqvYn0HEzfqCVdrBg* verts_2;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg cf;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg mf;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T22_;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T23_;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T24_;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T25_;
				if (!((*req)._kind_2.rotation == 0.0f)) goto LA20_;
				colontmpD__2 = (NF32)0;
				colontmpD__3 = (NF32)0;
				colontmpD__4 = (NF32)0;
				colontmpD__5 = (NF32)0;
				nimZeroMem((void*)(&colontmpD__6), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				nimZeroMem((void*)(&colontmpD__7), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				colontmpD__8 = (NF32)0;
				colontmpD__9 = (NF32)0;
				colontmpD__10 = (NF32)0;
				nimZeroMem((void*)(&colontmpD__11), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				nimZeroMem((void*)(&colontmpD__12), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				colontmpD__13 = (NF32)0;
				colontmpD__14 = (NF32)0;
				nimZeroMem((void*)(&colontmpD__15), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				nimZeroMem((void*)(&colontmpD__16), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				colontmpD__17 = (NF32)0;
				x2 = ((NF32)((*req)._kind_2.size.x) + (NF32)((*req)._kind_2.pos.x));
				y2 = ((NF32)((*req)._kind_2.size.y) + (NF32)((*req)._kind_2.pos.y));
				u = (*req)._kind_2.patch.u;
				v = (*req)._kind_2.patch.v2;
				u2 = (*req)._kind_2.patch.u2;
				v2 = (*req)._kind_2.patch.v;
				idx_2 = (*batch).index;
				verts_2 = (&(*(*batch).mesh).vertices);
				cf = (*req)._kind_2.color;
				mf = (*req)._kind_2.mixColor;
				nimZeroMem((void*)(&T22_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T22_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				colontmpD__2 = (*req)._kind_2.pos.x;
				T22_.pos.x = colontmpD__2;
				colontmpD__3 = (*req)._kind_2.pos.y;
				T22_.pos.y = colontmpD__3;
				nimZeroMem((void*)(&T22_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				colontmpD__4 = u;
				T22_.uv.x = colontmpD__4;
				colontmpD__5 = v;
				T22_.uv.y = colontmpD__5;
				colontmpD__6 = cf;
				T22_.color = colontmpD__6;
				colontmpD__7 = mf;
				T22_.mixcolor = colontmpD__7;
				(*verts_2).p->data[(NI)(idx_2 + ((NI) 0))] = T22_;
				nimZeroMem((void*)(&T23_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T23_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				colontmpD__8 = (*req)._kind_2.pos.x;
				T23_.pos.x = colontmpD__8;
				colontmpD__9 = y2;
				T23_.pos.y = colontmpD__9;
				nimZeroMem((void*)(&T23_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T23_.uv.x = u;
				colontmpD__10 = v2;
				T23_.uv.y = colontmpD__10;
				colontmpD__11 = cf;
				T23_.color = colontmpD__11;
				colontmpD__12 = mf;
				T23_.mixcolor = colontmpD__12;
				(*verts_2).p->data[(NI)(idx_2 + ((NI) 1))] = T23_;
				nimZeroMem((void*)(&T24_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T24_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				colontmpD__13 = x2;
				T24_.pos.x = colontmpD__13;
				T24_.pos.y = y2;
				nimZeroMem((void*)(&T24_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				colontmpD__14 = u2;
				T24_.uv.x = colontmpD__14;
				T24_.uv.y = v2;
				colontmpD__15 = cf;
				T24_.color = colontmpD__15;
				colontmpD__16 = mf;
				T24_.mixcolor = colontmpD__16;
				(*verts_2).p->data[(NI)(idx_2 + ((NI) 2))] = T24_;
				nimZeroMem((void*)(&T25_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T25_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T25_.pos.x = x2;
				colontmpD__17 = (*req)._kind_2.pos.y;
				T25_.pos.y = colontmpD__17;
				nimZeroMem((void*)(&T25_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T25_.uv.x = u2;
				T25_.uv.y = v;
				T25_.color = cf;
				T25_.mixcolor = mf;
				(*verts_2).p->data[(NI)(idx_2 + ((NI) 3))] = T25_;
			}
			goto LA18_;
			LA20_: ;
			{
				NF32 colontmpD__18;
				NF32 colontmpD__19;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__20;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__21;
				NF32 colontmpD__22;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__23;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__24;
				NF32 colontmpD__25;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__26;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg colontmpD__27;
				NF32 worldOriginX;
				NF32 worldOriginY;
				NF32 fx;
				NF32 fy;
				NF32 fx2;
				NF32 fy2;
				NF32 cos_1;
				NF32 sin_1;
				NF32 x1;
				NF32 y1;
				NF32 x2_2;
				NF32 y2_2;
				NF32 x3;
				NF32 y3;
				NF32 x4;
				NF32 y4;
				NF32 u_2;
				NF32 v_2;
				NF32 u2_2;
				NF32 v2_2;
				NI idx_3;
				tySequence__PARCrxqvYn0HEzfqCVdrBg* verts_3;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg cf_2;
				tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg mf_2;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T27_;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T28_;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T29_;
				tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ T30_;
				colontmpD__18 = (NF32)0;
				colontmpD__19 = (NF32)0;
				nimZeroMem((void*)(&colontmpD__20), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				nimZeroMem((void*)(&colontmpD__21), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				colontmpD__22 = (NF32)0;
				nimZeroMem((void*)(&colontmpD__23), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				nimZeroMem((void*)(&colontmpD__24), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				colontmpD__25 = (NF32)0;
				nimZeroMem((void*)(&colontmpD__26), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				nimZeroMem((void*)(&colontmpD__27), sizeof(tyObject_Color__OSWJq3HNkIl1V7S3GsYvBg));
				worldOriginX = ((NF32)((*req)._kind_2.pos.x) + (NF32)((*req)._kind_2.origin.x));
				worldOriginY = ((NF32)((*req)._kind_2.pos.y) + (NF32)((*req)._kind_2.origin.y));
				fx = -((*req)._kind_2.origin.x);
				fy = -((*req)._kind_2.origin.y);
				fx2 = ((NF32)((*req)._kind_2.size.x) - (NF32)((*req)._kind_2.origin.x));
				fy2 = ((NF32)((*req)._kind_2.size.y) - (NF32)((*req)._kind_2.origin.y));
				cos_1 = cosf((*req)._kind_2.rotation);
				sin_1 = sinf((*req)._kind_2.rotation);
				x1 = ((NF32)(((NF32)(((NF32)(cos_1) * (NF32)(fx))) - (NF32)(((NF32)(sin_1) * (NF32)(fy))))) + (NF32)(worldOriginX));
				y1 = ((NF32)(((NF32)(((NF32)(sin_1) * (NF32)(fx))) + (NF32)(((NF32)(cos_1) * (NF32)(fy))))) + (NF32)(worldOriginY));
				x2_2 = ((NF32)(((NF32)(((NF32)(cos_1) * (NF32)(fx))) - (NF32)(((NF32)(sin_1) * (NF32)(fy2))))) + (NF32)(worldOriginX));
				y2_2 = ((NF32)(((NF32)(((NF32)(sin_1) * (NF32)(fx))) + (NF32)(((NF32)(cos_1) * (NF32)(fy2))))) + (NF32)(worldOriginY));
				x3 = ((NF32)(((NF32)(((NF32)(cos_1) * (NF32)(fx2))) - (NF32)(((NF32)(sin_1) * (NF32)(fy2))))) + (NF32)(worldOriginX));
				y3 = ((NF32)(((NF32)(((NF32)(sin_1) * (NF32)(fx2))) + (NF32)(((NF32)(cos_1) * (NF32)(fy2))))) + (NF32)(worldOriginY));
				x4 = ((NF32)(x1) + (NF32)(((NF32)(x3) - (NF32)(x2_2))));
				y4 = ((NF32)(y3) - (NF32)(((NF32)(y2_2) - (NF32)(y1))));
				u_2 = (*req)._kind_2.patch.u;
				v_2 = (*req)._kind_2.patch.v2;
				u2_2 = (*req)._kind_2.patch.u2;
				v2_2 = (*req)._kind_2.patch.v;
				idx_3 = (*batch).index;
				verts_3 = (&(*(*batch).mesh).vertices);
				cf_2 = (*req)._kind_2.color;
				mf_2 = (*req)._kind_2.mixColor;
				nimZeroMem((void*)(&T27_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T27_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T27_.pos.x = x1;
				T27_.pos.y = y1;
				nimZeroMem((void*)(&T27_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				colontmpD__18 = u_2;
				T27_.uv.x = colontmpD__18;
				colontmpD__19 = v_2;
				T27_.uv.y = colontmpD__19;
				colontmpD__20 = cf_2;
				T27_.color = colontmpD__20;
				colontmpD__21 = mf_2;
				T27_.mixcolor = colontmpD__21;
				(*verts_3).p->data[(NI)(idx_3 + ((NI) 0))] = T27_;
				nimZeroMem((void*)(&T28_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T28_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T28_.pos.x = x2_2;
				T28_.pos.y = y2_2;
				nimZeroMem((void*)(&T28_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T28_.uv.x = u_2;
				colontmpD__22 = v2_2;
				T28_.uv.y = colontmpD__22;
				colontmpD__23 = cf_2;
				T28_.color = colontmpD__23;
				colontmpD__24 = mf_2;
				T28_.mixcolor = colontmpD__24;
				(*verts_3).p->data[(NI)(idx_3 + ((NI) 1))] = T28_;
				nimZeroMem((void*)(&T29_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T29_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T29_.pos.x = x3;
				T29_.pos.y = y3;
				nimZeroMem((void*)(&T29_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				colontmpD__25 = u2_2;
				T29_.uv.x = colontmpD__25;
				T29_.uv.y = v2_2;
				colontmpD__26 = cf_2;
				T29_.color = colontmpD__26;
				colontmpD__27 = mf_2;
				T29_.mixcolor = colontmpD__27;
				(*verts_3).p->data[(NI)(idx_3 + ((NI) 2))] = T29_;
				nimZeroMem((void*)(&T30_), sizeof(tyObject_Vert2__9cgwF8BmjkvAg9czRZkuIhqQ));
				nimZeroMem((void*)(&T30_.pos), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T30_.pos.x = x4;
				T30_.pos.y = y4;
				nimZeroMem((void*)(&T30_.uv), sizeof(tyObject_Vec2__207B9cwFjt9a8ydWqYFfZZ2w));
				T30_.uv.x = u2_2;
				T30_.uv.y = v_2;
				T30_.color = cf_2;
				T30_.mixcolor = mf_2;
				(*verts_3).p->data[(NI)(idx_3 + ((NI) 3))] = T30_;
			}
			LA18_: ;
			(*batch).index += ((NI) 4);
		}
		break;
		case ((tyEnum_ReqKind__9bS5jOf2QF9cteaMf32Tvmxg) 2):
		{
			(*req)._kind_3.draw.ClE_0? (*req)._kind_3.draw.ClP_0((*req)._kind_3.draw.ClE_0):((TM__G37V9b0gV1DLL4f9c49aj9a7Xg_7)((*req)._kind_3.draw.ClP_0))();
			if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		}
		break;
		}
	}
	LA1_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, flush__OOZfauZsrcZfauZbatch_735)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		tyProc__Fx2AFifABb7WhUUegOH7wA T5_;
		if (!(*batch).sort) goto LA3_;
		nimZeroMem((void*)(&T5_), sizeof(tyProc__Fx2AFifABb7WhUUegOH7wA));
		T5_.ClP_0 = ((TM__G37V9b0gV1DLL4f9c49aj9a7Xg_2) (colonanonymous___OOZfauZsrcZfauZbatch_755)); T5_.ClE_0 = NIM_NIL;
		sort__OOZfauZsrcZfauZbatch_787((*batch).req.p->data, (*batch).req.len, T5_, ((tyEnum_SortOrder__8iBc6wlNqBa9cju9cUAhUAxA) 1));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		(*batch).sort = NIM_FALSE;
		{
			tyObject_Req__H68QjrbUnFwaMhvhofU5EQ* req;
			NI i;
			NI L;
			NI T7_;
			req = (tyObject_Req__H68QjrbUnFwaMhvhofU5EQ*)0;
			i = ((NI) 0);
			T7_ = (*batch).req.len;
			L = T7_;
			{
				while (1) {
					if (!(i < L)) goto LA9;
					req = (&(*batch).req.p->data[i]);
					draw__OOZfauZsrcZfauZbatch_294(batch, (&(*req)));
					if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
					i += ((NI) 1);
				} LA9: ;
			}
		}
		setLen__OOZfauZsrcZfauZbatch_644((&(*batch).req), ((NI) 0));
		(*batch).sort = NIM_TRUE;
	}
	LA3_: ;
	flushInternal__OOZfauZsrcZfauZbatch_68(batch);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_612)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* dest) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest).mesh);
		if (!T3_) goto LA4_;
		eqdestroy___OOZfauZsrcZfauZbatch_585((*dest).mesh);
		nimRawDispose((*dest).mesh, ((NI) 4));
	}
	LA4_: ;
	{
		NIM_BOOL T8_;
		T8_ = (NIM_BOOL)0;
		T8_ = nimDecRefIsLast((*dest).defaultShader);
		if (!T8_) goto LA9_;
		eqdestroy___OOZfauZsrcZfauZshader_44((*dest).defaultShader);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest).defaultShader, ((NI) 4));
	}
	LA9_: ;
	{
		NIM_BOOL T13_;
		T13_ = (NIM_BOOL)0;
		T13_ = nimDecRefIsLast((*dest).lastShader);
		if (!T13_) goto LA14_;
		eqdestroy___OOZfauZsrcZfauZshader_44((*dest).lastShader);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest).lastShader, ((NI) 4));
	}
	LA14_: ;
	{
		NIM_BOOL T18_;
		T18_ = (NIM_BOOL)0;
		T18_ = nimDecRefIsLast((*dest).lastTexture);
		if (!T18_) goto LA19_;
		eqdestroy___OOZfauZsrcZfauZtexture_28((*dest).lastTexture);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest).lastTexture, ((NI) 4));
	}
	LA19_: ;
	{
		NIM_BOOL T23_;
		T23_ = (NIM_BOOL)0;
		T23_ = nimDecRefIsLast((*dest).buffer);
		if (!T23_) goto LA24_;
		eqdestroy___OOZfauZsrcZfauZframebuffer_14((*dest).buffer);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest).buffer, ((NI) 4));
	}
	LA24_: ;
	eqdestroy___OOZfauZsrcZfauZbatch_626((&(*dest).req));
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqsink___OOZfauZsrcZfauZbatch_729)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA** dest, tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* src) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___OOZfauZsrcZfauZbatch_612((*dest));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest), ((NI) 4));
	}
	LA4_: ;
	(*dest) = src;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(void, eqdestroy___OOZfauZsrcZfauZbatch_723)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA** dest) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	{
		NIM_BOOL T3_;
		T3_ = (NIM_BOOL)0;
		T3_ = nimDecRefIsLast((*dest));
		if (!T3_) goto LA4_;
		eqdestroy___OOZfauZsrcZfauZbatch_612((*dest));
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		nimRawDispose((*dest), ((NI) 4));
	}
	LA4_: ;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA*, newBatch__OOZfauZsrcZfauZbatch_459)(NI size) {
	tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* result;
	tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch;
	tySequence__PARCrxqvYn0HEzfqCVdrBg colontmpD_;
	tySequence__uFLLGQVsiasALrzzzvqnZw colontmpD__2;
	tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* colontmpD__3;
	tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* T2_;
	NI len;
	tySequence__uFLLGQVsiasALrzzzvqnZw* indices;
	NI j;
	NI i;
	tyObject_ShaderObj__KFmcUvp7lIrtBdspoRxLXw* T5_;
NIM_BOOL oldNimErrFin1_;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	batch = NIM_NIL;
	colontmpD_.len = 0; colontmpD_.p = NIM_NIL;
	colontmpD__2.len = 0; colontmpD__2.p = NIM_NIL;
	colontmpD__3 = NIM_NIL;
	T2_ = NIM_NIL;
	T2_ = (tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA*) nimNewObj(sizeof(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA), NIM_ALIGNOF(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA));
	colontmpD_ = newSeq__OOZfauZsrcZfauZbatch_527(((NI) ((NI)(size * ((NI) 4)))));
	colontmpD__2 = newSeq__OOZfauZsrcZfauZbatch_560(((NI) ((NI)(size * ((NI) 6)))));
	(*T2_).mesh = newMesh__OOZfauZsrcZfauZbatch_568(NIM_FALSE, ((NU32) 4), colontmpD_, colontmpD__2);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	colontmpD__3 = 0;
	eqcopy___OOZfauZsrcZfauZframebuffer_73(&colontmpD__3, screen__OOZfauZsrcZfauZscreenbuffer_2);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	(*T2_).buffer = colontmpD__3;
	(*T2_).size = (NI)(size * ((NI) 4));
	(*T2_).sort = NIM_TRUE;
	batch = T2_;
	len = (NI)(size * ((NI) 6));
	indices = (&(*(*batch).mesh).indices);
	j = ((NI) 0);
	i = ((NI) 0);
	{
		while (1) {
			if (!(i < len)) goto LA4;
			(*indices).p->data[(NI)(i + ((NI) 0))] = ((NU16) (j));
			(*indices).p->data[(NI)(i + ((NI) 1))] = ((NU16) ((NI)(j + ((NI) 1))));
			(*indices).p->data[(NI)(i + ((NI) 2))] = ((NU16) ((NI)(j + ((NI) 2))));
			(*indices).p->data[(NI)(i + ((NI) 3))] = ((NU16) ((NI)(j + ((NI) 2))));
			(*indices).p->data[(NI)(i + ((NI) 4))] = ((NU16) ((NI)(j + ((NI) 3))));
			(*indices).p->data[(NI)(i + ((NI) 5))] = ((NU16) (j));
			i += ((NI) 6);
			j += ((NI) 4);
		} LA4: ;
	}
	T5_ = NIM_NIL;
	T5_ = newShader__OOZfauZsrcZfauZshader_65(TM__G37V9b0gV1DLL4f9c49aj9a7Xg_9, TM__G37V9b0gV1DLL4f9c49aj9a7Xg_11);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	eqsink___OOZfauZsrcZfauZshader_1658(&(*batch).defaultShader, T5_);
	if (NIM_UNLIKELY(*nimErr_)) goto LA1_;
	result = batch;
	batch = 0;
	{
		LA1_:;
	}
	{
		oldNimErrFin1_ = *nimErr_; *nimErr_ = NIM_FALSE;
		eqdestroy___OOZOOZOOZOnimbleZpkgsZstb95image4550O53Zstb95imageZread_264((&colontmpD__2));
		eqdestroy___OOZfauZsrcZfauZbatch_535((&colontmpD_));
		eqdestroy___OOZfauZsrcZfauZbatch_723(&batch);
		if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
		*nimErr_ = oldNimErrFin1_;
	}
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, mat__OOZfauZsrcZfauZbatch_941)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch, tyArray__mEOj6RCJtUq5VS5mI7S2ew mat) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	flush__OOZfauZsrcZfauZbatch_735(batch);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	nimCopyMem((void*)(*batch).mat, (NIM_CONST void*)mat, sizeof(tyArray__mEOj6RCJtUq5VS5mI7S2ew));
	inv__OOZfauZsrcZfauZfmath_1246(mat, (*batch).matInv);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
N_LIB_PRIVATE N_NIMCALL(tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ*, buffer__OOZfauZsrcZfauZbatch_947)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch) {
	tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* result;
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	result = NIM_NIL;
	eqcopy___OOZfauZsrcZfauZframebuffer_73(&result, (*batch).buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}
N_LIB_PRIVATE N_NIMCALL(void, buffer__OOZfauZsrcZfauZbatch_944)(tyObject_BatchcolonObjectType___RYPwJl20EVec0ujcBafF9aA* batch, tyObject_FramebufferObj__1pPqnr9cylF8gi9bULYcALCQ* buffer) {
NIM_BOOL* nimErr_;
{nimErr_ = nimErrorFlag();
	flush__OOZfauZsrcZfauZbatch_735(batch);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	eqcopy___OOZfauZsrcZfauZframebuffer_73(&(*batch).buffer, buffer);
	if (NIM_UNLIKELY(*nimErr_)) goto BeforeRet_;
	}BeforeRet_: ;
}
